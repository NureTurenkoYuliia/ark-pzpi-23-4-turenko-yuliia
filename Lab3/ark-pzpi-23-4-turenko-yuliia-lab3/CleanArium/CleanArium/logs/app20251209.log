2025-12-09 00:07:31.519 +02:00 [INF] Application starting
2025-12-09 00:07:32.293 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-12-09 00:07:36.134 +02:00 [DBG] Entity Framework Core 8.0.18 initialized 'CleanAriumDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.18' with options: MigrationsAssembly=Persistence 
2025-12-09 00:07:36.277 +02:00 [DBG] Creating DbConnection.
2025-12-09 00:07:36.492 +02:00 [DBG] Created DbConnection. (224ms).
2025-12-09 00:07:36.663 +02:00 [DBG] Migrating using database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:36.685 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:40.197 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:40.214 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-12-09 00:07:40.227 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (17ms).
2025-12-09 00:07:40.232 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (26ms).
2025-12-09 00:07:40.248 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-09 00:07:40.293 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-09 00:07:40.302 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:40.317 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (8ms).
2025-12-09 00:07:40.326 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-12-09 00:07:40.336 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (10ms).
2025-12-09 00:07:40.338 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (12ms).
2025-12-09 00:07:40.340 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:40.342 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:40.347 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 00:07:40.402 +02:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 00:07:40.406 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:40.409 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (3ms).
2025-12-09 00:07:40.413 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:40.415 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:40.417 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-12-09 00:07:40.418 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-12-09 00:07:40.420 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (3ms).
2025-12-09 00:07:40.422 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-09 00:07:40.426 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-09 00:07:40.428 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:40.431 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (2ms).
2025-12-09 00:07:40.433 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-12-09 00:07:40.435 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-12-09 00:07:40.437 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-12-09 00:07:40.439 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:40.440 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:40.442 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 00:07:40.445 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 00:07:40.448 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:40.450 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (1ms).
2025-12-09 00:07:40.475 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:40.477 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:40.479 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 00:07:40.481 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-09 00:07:40.483 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-09 00:07:40.485 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-09 00:07:40.583 +02:00 [INF] Executed DbCommand (98ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-09 00:07:40.590 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:40.594 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 6ms reading results.
2025-12-09 00:07:40.597 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:40.599 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (2ms).
2025-12-09 00:07:40.622 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-12-09 00:07:40.634 +02:00 [INF] Checking if admin user exists...
2025-12-09 00:07:40.773 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => (int)u.Role == 3)'
2025-12-09 00:07:41.166 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required MaxLength(255), 2], [Property: User.IsBlocked (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.PasswordHash (string) Required, 5], [Property: User.Role (UserRole) Required, 6], [Property: User.Salt (string) Required, 7], [Property: User.UserName (string) Required MaxLength(30), 8] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.Email, u.IsBlocked, u.LastLoginAt, u.PasswordHash, u.Role, u.Salt, u.UserName
            FROM CleanArium.Users AS u
            WHERE u.Role == 3), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Persistence.Application.CleanAriumDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-09 00:07:41.245 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:41.258 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:41.264 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 00:07:41.267 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-09 00:07:41.269 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-12-09 00:07:41.271 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Role] = 3
2025-12-09 00:07:41.348 +02:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Role] = 3
2025-12-09 00:07:41.420 +02:00 [DBG] Context 'CleanAriumDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 00:07:41.500 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:41.505 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 152ms reading results.
2025-12-09 00:07:41.511 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:41.516 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (4ms).
2025-12-09 00:07:41.518 +02:00 [INF] Admin already exists. Skipping seeding.
2025-12-09 00:07:41.523 +02:00 [DBG] 'CleanAriumDbContext' disposed.
2025-12-09 00:07:41.529 +02:00 [DBG] Disposing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:41.533 +02:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-12-09 00:07:41.748 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-12-09 00:07:41.961 +02:00 [DBG] Hosting starting
2025-12-09 00:07:42.006 +02:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-09 00:07:42.029 +02:00 [INF] Refresh token cleanup service started.
2025-12-09 00:07:42.036 +02:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-2bf296c1-e960-45a6-9b2e-1b3a7a4f6df5.xml'.
2025-12-09 00:07:42.068 +02:00 [DBG] Entity Framework Core 8.0.18 initialized 'CleanAriumDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.18' with options: MigrationsAssembly=Persistence 
2025-12-09 00:07:42.105 +02:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-39215358-ff03-452f-97d9-71001816138e.xml'.
2025-12-09 00:07:42.125 +02:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Where(x => x.ExpiresAt < DateTime.UtcNow)'
2025-12-09 00:07:42.133 +02:00 [DBG] Found key {2bf296c1-e960-45a6-9b2e-1b3a7a4f6df5}.
2025-12-09 00:07:42.149 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RefreshToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.ExpiresAt (DateTime) Required, 1], [Property: RefreshToken.IsRevoked (bool) Required, 2], [Property: RefreshToken.Token (string) Required, 3], [Property: RefreshToken.UserId (long) Required FK Index, 4] }
        SELECT r.Id, r.ExpiresAt, r.IsRevoked, r.Token, r.UserId
        FROM CleanArium.RefreshTokens AS r
        WHERE r.ExpiresAt < GETUTCDATE()), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RefreshToken>, 
    Persistence.Application.CleanAriumDbContext, 
    False, 
    False, 
    True
)'
2025-12-09 00:07:42.149 +02:00 [DBG] Found key {39215358-ff03-452f-97d9-71001816138e}.
2025-12-09 00:07:42.155 +02:00 [DBG] Creating DbConnection.
2025-12-09 00:07:42.159 +02:00 [DBG] Created DbConnection. (3ms).
2025-12-09 00:07:42.166 +02:00 [DBG] Considering key {2bf296c1-e960-45a6-9b2e-1b3a7a4f6df5} with expiration date 2026-01-29 22:22:30Z as default key.
2025-12-09 00:07:42.167 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:42.174 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:42.175 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 00:07:42.176 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-09 00:07:42.177 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-09 00:07:42.180 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-12-09 00:07:42.181 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-12-09 00:07:42.184 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ExpiresAt], [r].[IsRevoked], [r].[Token], [r].[UserId]
FROM [CleanArium].[RefreshTokens] AS [r]
WHERE [r].[ExpiresAt] < GETUTCDATE()
2025-12-09 00:07:42.185 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-09 00:07:42.206 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-12-09 00:07:42.210 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-12-09 00:07:42.217 +02:00 [DBG] Using key {2bf296c1-e960-45a6-9b2e-1b3a7a4f6df5} as the default key.
2025-12-09 00:07:42.221 +02:00 [DBG] Key ring with default key {2bf296c1-e960-45a6-9b2e-1b3a7a4f6df5} was loaded during application startup.
2025-12-09 00:07:42.260 +02:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ExpiresAt], [r].[IsRevoked], [r].[Token], [r].[UserId]
FROM [CleanArium].[RefreshTokens] AS [r]
WHERE [r].[ExpiresAt] < GETUTCDATE()
2025-12-09 00:07:42.278 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:42.286 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 9ms reading results.
2025-12-09 00:07:42.288 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:42.290 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (2ms).
2025-12-09 00:07:42.294 +02:00 [DBG] 'CleanAriumDbContext' disposed.
2025-12-09 00:07:42.316 +02:00 [DBG] Disposing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:07:42.320 +02:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-12-09 00:07:42.678 +02:00 [INF] Now listening on: https://localhost:7085
2025-12-09 00:07:42.680 +02:00 [INF] Now listening on: http://localhost:5250
2025-12-09 00:07:42.682 +02:00 [DBG] Loaded hosting startup assembly CleanArium
2025-12-09 00:07:42.684 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-12-09 00:07:42.685 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-12-09 00:07:42.687 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-12-09 00:07:42.944 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-09 00:07:42.999 +02:00 [INF] Hosting environment: Development
2025-12-09 00:07:43.007 +02:00 [INF] Content root path: C:\Users\User\source\repos\CleanArium\CleanArium
2025-12-09 00:07:43.020 +02:00 [DBG] Hosting started
2025-12-09 00:07:43.037 +02:00 [DBG] Connection id "0HNHMKOQUP7FB" accepted.
2025-12-09 00:07:43.037 +02:00 [DBG] Connection id "0HNHMKOQUP7FB" received FIN.
2025-12-09 00:07:43.037 +02:00 [DBG] Connection id "0HNHMKOQUP7FC" received FIN.
2025-12-09 00:07:43.041 +02:00 [DBG] Connection id "0HNHMKOQUP7FB" started.
2025-12-09 00:07:43.054 +02:00 [DBG] Connection id "0HNHMKOQUP7FC" accepted.
2025-12-09 00:07:43.059 +02:00 [DBG] Connection id "0HNHMKOQUP7FC" started.
2025-12-09 00:07:43.097 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-12-09 00:07:43.104 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-12-09 00:07:43.189 +02:00 [DBG] Connection id "0HNHMKOQUP7FC" stopped.
2025-12-09 00:07:43.224 +02:00 [DBG] Connection id "0HNHMKOQUP7FB" stopped.
2025-12-09 00:07:43.239 +02:00 [DBG] Connection id "0HNHMKOQUP7FC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 00:07:43.241 +02:00 [DBG] Connection id "0HNHMKOQUP7FB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 00:07:44.363 +02:00 [DBG] Connection id "0HNHMKOQUP7FD" accepted.
2025-12-09 00:07:44.577 +02:00 [DBG] Connection id "0HNHMKOQUP7FD" started.
2025-12-09 00:07:44.685 +02:00 [DBG] Connection 0HNHMKOQUP7FD established using the following protocol: "Tls13"
2025-12-09 00:07:44.837 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/swagger/index.html - null null
2025-12-09 00:07:45.153 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-12-09 00:07:45.270 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-12-09 00:07:45.284 +02:00 [DBG] Request did not match any endpoints
2025-12-09 00:07:45.512 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-09 00:07:45.823 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-12-09 00:07:45.827 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-12-09 00:07:45.904 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-12-09 00:07:45.913 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-12-09 00:07:45.929 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/swagger/index.html - 200 null text/html;charset=utf-8 1107.2471ms
2025-12-09 00:07:46.014 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/_framework/aspnetcore-browser-refresh.js - null null
2025-12-09 00:07:46.024 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/_vs/browserLink - null null
2025-12-09 00:07:46.139 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 127.8241ms
2025-12-09 00:07:46.285 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/_vs/browserLink - 200 null text/javascript; charset=UTF-8 261.112ms
2025-12-09 00:07:46.540 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/swagger/v1/swagger.json - null null
2025-12-09 00:07:46.553 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-12-09 00:07:46.557 +02:00 [DBG] Request did not match any endpoints
2025-12-09 00:07:46.604 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-09 00:07:46.690 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 149.8642ms
2025-12-09 00:07:54.006 +02:00 [DBG] Connection id "0HNHMKOQUP7FD" received FIN.
2025-12-09 00:07:54.011 +02:00 [DBG] Connection id "0HNHMKOQUP7FD" is closed. The last processed stream ID was 7.
2025-12-09 00:07:54.014 +02:00 [DBG] The connection queue processing loop for 0HNHMKOQUP7FD completed.
2025-12-09 00:07:54.014 +02:00 [DBG] Connection id "0HNHMKOQUP7FD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 00:07:54.019 +02:00 [DBG] Connection id "0HNHMKOQUP7FD" stopped.
2025-12-09 00:08:26.218 +02:00 [DBG] Connection id "0HNHMKOQUP7FE" accepted.
2025-12-09 00:08:26.255 +02:00 [DBG] Connection id "0HNHMKOQUP7FE" started.
2025-12-09 00:08:26.272 +02:00 [DBG] Connection 0HNHMKOQUP7FE established using the following protocol: "Tls13"
2025-12-09 00:08:26.287 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7085/api/Auth/login - application/json 61
2025-12-09 00:08:26.332 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-12-09 00:08:26.354 +02:00 [DBG] Endpoint 'CleanArium.Controllers.AuthController.Login (CleanArium)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-12-09 00:08:26.357 +02:00 [DBG] Request matched endpoint 'CleanArium.Controllers.AuthController.Login (CleanArium)'
2025-12-09 00:08:26.369 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-09 00:08:26.374 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-09 00:08:26.376 +02:00 [INF] Executing endpoint 'CleanArium.Controllers.AuthController.Login (CleanArium)'
2025-12-09 00:08:26.459 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(CleanArium.Contracts.Auth.LoginRequest) on controller CleanArium.Controllers.AuthController (CleanArium).
2025-12-09 00:08:26.469 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-09 00:08:26.471 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-09 00:08:26.473 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-09 00:08:26.476 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-09 00:08:26.481 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-09 00:08:26.490 +02:00 [DBG] Executing controller factory for controller CleanArium.Controllers.AuthController (CleanArium)
2025-12-09 00:08:26.507 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-09 00:08:26.509 +02:00 [DBG] Executed controller factory for controller CleanArium.Controllers.AuthController (CleanArium)
2025-12-09 00:08:26.618 +02:00 [DBG] Attempting to bind parameter 'request' of type 'CleanArium.Contracts.Auth.LoginRequest' ...
2025-12-09 00:08:26.627 +02:00 [DBG] Attempting to bind parameter 'request' of type 'CleanArium.Contracts.Auth.LoginRequest' using the name '' in request data ...
2025-12-09 00:08:26.635 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-12-09 00:08:26.654 +02:00 [DBG] Connection id "0HNHMKOQUP7FE", Request id "0HNHMKOQUP7FE:00000001": started reading request body.
2025-12-09 00:08:26.658 +02:00 [DBG] Connection id "0HNHMKOQUP7FE", Request id "0HNHMKOQUP7FE:00000001": done reading request body.
2025-12-09 00:08:26.688 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'CleanArium.Contracts.Auth.LoginRequest'
2025-12-09 00:08:26.690 +02:00 [DBG] Done attempting to bind parameter 'request' of type 'CleanArium.Contracts.Auth.LoginRequest'.
2025-12-09 00:08:26.692 +02:00 [DBG] Done attempting to bind parameter 'request' of type 'CleanArium.Contracts.Auth.LoginRequest'.
2025-12-09 00:08:26.696 +02:00 [DBG] Attempting to validate the bound parameter 'request' of type 'CleanArium.Contracts.Auth.LoginRequest' ...
2025-12-09 00:08:26.711 +02:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'CleanArium.Contracts.Auth.LoginRequest'.
2025-12-09 00:08:26.939 +02:00 [DBG] Entity Framework Core 8.0.18 initialized 'CleanAriumDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.18' with options: MigrationsAssembly=Persistence 
2025-12-09 00:08:26.955 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(x => x.Email == __email_0)'
2025-12-09 00:08:26.975 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required MaxLength(255), 2], [Property: User.IsBlocked (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.PasswordHash (string) Required, 5], [Property: User.Role (UserRole) Required, 6], [Property: User.Salt (string) Required, 7], [Property: User.UserName (string) Required MaxLength(30), 8] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.Email, u.IsBlocked, u.LastLoginAt, u.PasswordHash, u.Role, u.Salt, u.UserName
            FROM CleanArium.Users AS u
            WHERE u.Email == @__email_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Persistence.Application.CleanAriumDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-09 00:08:26.988 +02:00 [DBG] Creating DbConnection.
2025-12-09 00:08:26.989 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-09 00:08:26.990 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:26.992 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:26.996 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 00:08:27.001 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-12-09 00:08:27.009 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-12-09 00:08:27.022 +02:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-12-09 00:08:27.122 +02:00 [INF] Executed DbCommand (105ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-12-09 00:08:27.127 +02:00 [DBG] Context 'CleanAriumDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 00:08:27.137 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:27.140 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 14ms reading results.
2025-12-09 00:08:27.142 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:27.144 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (1ms).
2025-12-09 00:08:27.174 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:27.176 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:27.181 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 00:08:27.182 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-09 00:08:27.184 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-09 00:08:27.186 +02:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-12-09 00:08:27.189 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-12-09 00:08:27.193 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:27.196 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 3ms reading results.
2025-12-09 00:08:27.202 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:27.204 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (2ms).
2025-12-09 00:08:27.332 +02:00 [DBG] 'CleanAriumDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 00:08:27.391 +02:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 00:08:27.409 +02:00 [DBG] Context 'CleanAriumDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 00:08:27.419 +02:00 [DBG] SaveChanges starting for 'CleanAriumDbContext'.
2025-12-09 00:08:27.426 +02:00 [DBG] DetectChanges starting for 'CleanAriumDbContext'.
2025-12-09 00:08:27.503 +02:00 [DBG] DetectChanges completed for 'CleanAriumDbContext'.
2025-12-09 00:08:27.670 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:27.671 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:27.677 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 00:08:27.679 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-09 00:08:27.683 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-12-09 00:08:27.685 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CleanArium].[RefreshTokens] ([ExpiresAt], [IsRevoked], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-12-09 00:08:27.768 +02:00 [INF] Executed DbCommand (83ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CleanArium].[RefreshTokens] ([ExpiresAt], [IsRevoked], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-12-09 00:08:27.801 +02:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-12-09 00:08:27.817 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:27.839 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 68ms reading results.
2025-12-09 00:08:27.877 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:27.883 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (6ms).
2025-12-09 00:08:27.904 +02:00 [DBG] An entity of type 'RefreshToken' tracked by 'CleanAriumDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 00:08:27.917 +02:00 [DBG] SaveChanges completed for 'CleanAriumDbContext' with 1 entities written to the database.
2025-12-09 00:08:27.920 +02:00 [INF] Successful login for user: 1 
2025-12-09 00:08:27.923 +02:00 [DBG] An entity of type 'User' tracked by 'CleanAriumDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 00:08:27.926 +02:00 [DBG] SaveChanges starting for 'CleanAriumDbContext'.
2025-12-09 00:08:27.932 +02:00 [DBG] DetectChanges starting for 'CleanAriumDbContext'.
2025-12-09 00:08:27.934 +02:00 [DBG] DetectChanges completed for 'CleanAriumDbContext'.
2025-12-09 00:08:27.947 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:27.951 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:27.953 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 00:08:27.954 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-09 00:08:27.956 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-09 00:08:27.958 +02:00 [DBG] Executing DbCommand [Parameters=[@p8='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (Size = 30)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [CleanArium].[Users] SET [CreatedAt] = @p0, [Email] = @p1, [IsBlocked] = @p2, [LastLoginAt] = @p3, [PasswordHash] = @p4, [Role] = @p5, [Salt] = @p6, [UserName] = @p7
OUTPUT 1
WHERE [Id] = @p8;
2025-12-09 00:08:28.007 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[@p8='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (Size = 30)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [CleanArium].[Users] SET [CreatedAt] = @p0, [Email] = @p1, [IsBlocked] = @p2, [LastLoginAt] = @p3, [PasswordHash] = @p4, [Role] = @p5, [Salt] = @p6, [UserName] = @p7
OUTPUT 1
WHERE [Id] = @p8;
2025-12-09 00:08:28.022 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:28.024 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 5ms reading results.
2025-12-09 00:08:28.030 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:28.040 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (10ms).
2025-12-09 00:08:28.047 +02:00 [DBG] An entity of type 'User' tracked by 'CleanAriumDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 00:08:28.050 +02:00 [DBG] SaveChanges completed for 'CleanAriumDbContext' with 1 entities written to the database.
2025-12-09 00:08:28.056 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-09 00:08:28.060 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-09 00:08:28.068 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-09 00:08:28.069 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-09 00:08:28.072 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-09 00:08:28.076 +02:00 [INF] Executing OkObjectResult, writing value of type 'Application.DTOs.Auth.AuthResponseDto'.
2025-12-09 00:08:28.092 +02:00 [INF] Executed action CleanArium.Controllers.AuthController.Login (CleanArium) in 1599.9101ms
2025-12-09 00:08:28.096 +02:00 [INF] Executed endpoint 'CleanArium.Controllers.AuthController.Login (CleanArium)'
2025-12-09 00:08:28.101 +02:00 [DBG] 'CleanAriumDbContext' disposed.
2025-12-09 00:08:28.107 +02:00 [DBG] Disposing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:28.109 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-09 00:08:28.118 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7085/api/Auth/login - 200 null application/json; charset=utf-8 1831.2675ms
2025-12-09 00:08:29.031 +02:00 [DBG] Connection id "0HNHMKOQUP7FE" received FIN.
2025-12-09 00:08:29.050 +02:00 [DBG] Connection id "0HNHMKOQUP7FE" is closed. The last processed stream ID was 1.
2025-12-09 00:08:29.050 +02:00 [DBG] The connection queue processing loop for 0HNHMKOQUP7FE completed.
2025-12-09 00:08:29.076 +02:00 [DBG] Connection id "0HNHMKOQUP7FE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 00:08:29.088 +02:00 [DBG] Connection id "0HNHMKOQUP7FE" stopped.
2025-12-09 00:08:43.848 +02:00 [DBG] Connection id "0HNHMKOQUP7FF" accepted.
2025-12-09 00:08:43.853 +02:00 [DBG] Connection id "0HNHMKOQUP7FF" started.
2025-12-09 00:08:43.866 +02:00 [DBG] Connection 0HNHMKOQUP7FF established using the following protocol: "Tls13"
2025-12-09 00:08:43.870 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/api/Admin/system-settings - null null
2025-12-09 00:08:43.879 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Admin/system-settings'
2025-12-09 00:08:43.883 +02:00 [DBG] Endpoint 'CleanArium.Controllers.AdminController.Get (CleanArium)' with route pattern 'api/Admin/system-settings' is valid for the request path '/api/Admin/system-settings'
2025-12-09 00:08:43.885 +02:00 [DBG] Request matched endpoint 'CleanArium.Controllers.AdminController.Get (CleanArium)'
2025-12-09 00:08:44.040 +02:00 [DBG] Successfully validated the token.
2025-12-09 00:08:44.047 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-12-09 00:08:44.069 +02:00 [DBG] Authorization was successful.
2025-12-09 00:08:44.071 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-09 00:08:44.073 +02:00 [INF] Executing endpoint 'CleanArium.Controllers.AdminController.Get (CleanArium)'
2025-12-09 00:08:44.088 +02:00 [INF] Route matched with {action = "Get", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller CleanArium.Controllers.AdminController (CleanArium).
2025-12-09 00:08:44.092 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-09 00:08:44.094 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-09 00:08:44.096 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-09 00:08:44.100 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-09 00:08:44.101 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-09 00:08:44.103 +02:00 [DBG] Executing controller factory for controller CleanArium.Controllers.AdminController (CleanArium)
2025-12-09 00:08:44.105 +02:00 [DBG] Executed controller factory for controller CleanArium.Controllers.AdminController (CleanArium)
2025-12-09 00:08:44.117 +02:00 [DBG] Entity Framework Core 8.0.18 initialized 'CleanAriumDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.18' with options: MigrationsAssembly=Persistence 
2025-12-09 00:08:44.121 +02:00 [DBG] Compiling query expression: 
'DbSet<SystemSettings>()
    .FirstOrDefault()'
2025-12-09 00:08:44.125 +02:00 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-12-09 00:08:44.134 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<SystemSettings>(
    asyncEnumerable: new SingleQueryingEnumerable<SystemSettings>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: SystemSettings.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: SystemSettings.MaxAlarmRulesPerDevice (int) Required, 1], [Property: SystemSettings.MaxAquariumsPerUser (int) Required, 2], [Property: SystemSettings.MaxDevicesPerAquarium (int) Required, 3], [Property: SystemSettings.MaxScheduledCommandsPerDevice (int) Required, 4] }
            SELECT TOP(1) s.Id, s.MaxAlarmRulesPerDevice, s.MaxAquariumsPerUser, s.MaxDevicesPerAquarium, s.MaxScheduledCommandsPerDevice
            FROM CleanArium.SystemSettings AS s), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, SystemSettings>, 
        Persistence.Application.CleanAriumDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-09 00:08:44.137 +02:00 [DBG] Creating DbConnection.
2025-12-09 00:08:44.138 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-09 00:08:44.140 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:44.141 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:44.143 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 00:08:44.145 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-09 00:08:44.147 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-09 00:08:44.149 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[MaxAlarmRulesPerDevice], [s].[MaxAquariumsPerUser], [s].[MaxDevicesPerAquarium], [s].[MaxScheduledCommandsPerDevice]
FROM [CleanArium].[SystemSettings] AS [s]
2025-12-09 00:08:44.174 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[MaxAlarmRulesPerDevice], [s].[MaxAquariumsPerUser], [s].[MaxDevicesPerAquarium], [s].[MaxScheduledCommandsPerDevice]
FROM [CleanArium].[SystemSettings] AS [s]
2025-12-09 00:08:44.179 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:44.183 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 6ms reading results.
2025-12-09 00:08:44.186 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:44.187 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (1ms).
2025-12-09 00:08:44.212 +02:00 [DBG] Context 'CleanAriumDbContext' started tracking 'SystemSettings' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 00:08:44.217 +02:00 [DBG] SaveChanges starting for 'CleanAriumDbContext'.
2025-12-09 00:08:44.219 +02:00 [DBG] DetectChanges starting for 'CleanAriumDbContext'.
2025-12-09 00:08:44.232 +02:00 [DBG] DetectChanges completed for 'CleanAriumDbContext'.
2025-12-09 00:08:44.235 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:44.237 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:44.238 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 00:08:44.240 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-09 00:08:44.241 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-09 00:08:44.243 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CleanArium].[SystemSettings] ([Id], [MaxAlarmRulesPerDevice], [MaxAquariumsPerUser], [MaxDevicesPerAquarium], [MaxScheduledCommandsPerDevice])
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-12-09 00:08:44.300 +02:00 [ERR] Failed executing DbCommand (55ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CleanArium].[SystemSettings] ([Id], [MaxAlarmRulesPerDevice], [MaxAquariumsPerUser], [MaxDevicesPerAquarium], [MaxScheduledCommandsPerDevice])
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-12-09 00:08:44.331 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:44.339 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (7ms).
2025-12-09 00:08:44.364 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'Persistence.Application.CleanAriumDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'SystemSettings' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b89c543d-7983-4eda-869c-5c271d83564a
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'SystemSettings' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b89c543d-7983-4eda-869c-5c271d83564a
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-12-09 00:08:45.189 +02:00 [INF] Executed action CleanArium.Controllers.AdminController.Get (CleanArium) in 1085.913ms
2025-12-09 00:08:45.198 +02:00 [INF] Executed endpoint 'CleanArium.Controllers.AdminController.Get (CleanArium)'
2025-12-09 00:08:45.579 +02:00 [ERR] Unhandled exception
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert explicit value for identity column in table 'SystemSettings' when IDENTITY_INSERT is set to OFF.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b89c543d-7983-4eda-869c-5c271d83564a
Error Number:544,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Persistence.Repositories.SystemSettingsRepository.GetAsync(CancellationToken ct) in C:\Users\User\source\repos\CleanArium\Persistence\Repositories\SystemSettingsRepository.cs:line 32
   at Application.SystemSettings.Queries.GetAll.GetSystemSettingsQueryHandler.Handle(GetSystemSettingsQuery request, CancellationToken ct) in C:\Users\User\source\repos\CleanArium\Application\SystemSettings\Queries\GetAll\GetSystemSettingsQueryHandler.cs:line 18
   at CleanArium.Extensions.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\source\repos\CleanArium\CleanArium\Extensions\ValidationBehavior.cs:line 37
   at CleanArium.Controllers.AdminController.Get() in C:\Users\User\source\repos\CleanArium\CleanArium\Controllers\AdminController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at CleanArium.Middleware.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\User\source\repos\CleanArium\CleanArium\Middleware\ExceptionMiddleware.cs:line 18
2025-12-09 00:08:45.725 +02:00 [DBG] 'CleanAriumDbContext' disposed.
2025-12-09 00:08:46.451 +02:00 [DBG] Disposing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 00:08:46.455 +02:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-12-09 00:08:46.463 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/api/Admin/system-settings - 500 null application/json; charset=utf-8 2593.6891ms
2025-12-09 00:08:54.050 +02:00 [DBG] Connection id "0HNHMKOQUP7FF" received FIN.
2025-12-09 00:08:54.052 +02:00 [DBG] Connection id "0HNHMKOQUP7FF" is closed. The last processed stream ID was 1.
2025-12-09 00:08:54.053 +02:00 [DBG] The connection queue processing loop for 0HNHMKOQUP7FF completed.
2025-12-09 00:08:54.056 +02:00 [DBG] Connection id "0HNHMKOQUP7FF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 00:08:54.064 +02:00 [DBG] Connection id "0HNHMKOQUP7FF" stopped.
2025-12-09 00:09:29.030 +02:00 [DBG] Connection id "0HNHMKOQUP7FG" accepted.
2025-12-09 00:09:29.042 +02:00 [DBG] Connection id "0HNHMKOQUP7FG" started.
2025-12-09 00:09:29.057 +02:00 [DBG] Connection 0HNHMKOQUP7FG established using the following protocol: "Tls13"
2025-12-09 00:09:29.084 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/api/AlarmRule/get-by-id/1 - null null
2025-12-09 00:09:29.088 +02:00 [DBG] 1 candidate(s) found for the request path '/api/AlarmRule/get-by-id/1'
2025-12-09 00:09:29.091 +02:00 [DBG] Endpoint 'CleanArium.Controllers.AlarmRuleController.GetById (CleanArium)' with route pattern 'api/AlarmRule/get-by-id/{ruleId:long}' is valid for the request path '/api/AlarmRule/get-by-id/1'
2025-12-09 00:09:29.093 +02:00 [DBG] Request matched endpoint 'CleanArium.Controllers.AlarmRuleController.GetById (CleanArium)'
2025-12-09 00:09:29.100 +02:00 [DBG] Successfully validated the token.
2025-12-09 00:09:29.101 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-12-09 00:09:29.107 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2025-12-09 00:09:29.118 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-12-09 00:09:29.122 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/api/AlarmRule/get-by-id/1 - 403 0 null 38.2164ms
2025-12-09 00:09:34.119 +02:00 [DBG] Connection id "0HNHMKOQUP7FG" received FIN.
2025-12-09 00:09:34.121 +02:00 [DBG] Connection id "0HNHMKOQUP7FG" is closed. The last processed stream ID was 1.
2025-12-09 00:09:34.121 +02:00 [DBG] The connection queue processing loop for 0HNHMKOQUP7FG completed.
2025-12-09 00:09:34.131 +02:00 [DBG] Connection id "0HNHMKOQUP7FG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 00:09:34.145 +02:00 [DBG] Connection id "0HNHMKOQUP7FG" stopped.
2025-12-09 00:10:05.532 +02:00 [DBG] Connection id "0HNHMKOQUP7FH" accepted.
2025-12-09 00:10:05.546 +02:00 [DBG] Connection id "0HNHMKOQUP7FH" started.
2025-12-09 00:10:05.612 +02:00 [DBG] Connection 0HNHMKOQUP7FH established using the following protocol: "Tls13"
2025-12-09 00:10:05.625 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7085/api/AlarmRule/1/deactivate - null 0
2025-12-09 00:10:05.639 +02:00 [DBG] 1 candidate(s) found for the request path '/api/AlarmRule/1/deactivate'
2025-12-09 00:10:05.653 +02:00 [DBG] Endpoint 'CleanArium.Controllers.AlarmRuleController.DeactivateAlarmRule (CleanArium)' with route pattern 'api/AlarmRule/{id}/deactivate' is valid for the request path '/api/AlarmRule/1/deactivate'
2025-12-09 00:10:05.655 +02:00 [DBG] Request matched endpoint 'CleanArium.Controllers.AlarmRuleController.DeactivateAlarmRule (CleanArium)'
2025-12-09 00:10:05.658 +02:00 [DBG] Successfully validated the token.
2025-12-09 00:10:05.659 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-12-09 00:10:05.663 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2025-12-09 00:10:05.666 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-12-09 00:10:05.667 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7085/api/AlarmRule/1/deactivate - 403 0 null 42.5868ms
2025-12-09 00:10:14.198 +02:00 [DBG] Connection id "0HNHMKOQUP7FH" received FIN.
2025-12-09 00:10:14.205 +02:00 [DBG] Connection id "0HNHMKOQUP7FH" is closed. The last processed stream ID was 1.
2025-12-09 00:10:14.206 +02:00 [DBG] The connection queue processing loop for 0HNHMKOQUP7FH completed.
2025-12-09 00:10:14.232 +02:00 [DBG] Connection id "0HNHMKOQUP7FH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 00:10:14.240 +02:00 [DBG] Connection id "0HNHMKOQUP7FH" stopped.
2025-12-09 00:11:19.568 +02:00 [DBG] Connection id "0HNHMKOQUP7FI" accepted.
2025-12-09 00:11:19.580 +02:00 [DBG] Connection id "0HNHMKOQUP7FI" started.
2025-12-09 00:11:19.606 +02:00 [DBG] Connection 0HNHMKOQUP7FI established using the following protocol: "Tls13"
2025-12-09 00:11:19.622 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/api/Admin/logs - null null
2025-12-09 00:11:19.637 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Admin/logs'
2025-12-09 00:11:19.654 +02:00 [DBG] Endpoint 'CleanArium.Controllers.AdminController.GetLogs (CleanArium)' with route pattern 'api/Admin/logs' is valid for the request path '/api/Admin/logs'
2025-12-09 00:11:19.655 +02:00 [DBG] Request matched endpoint 'CleanArium.Controllers.AdminController.GetLogs (CleanArium)'
2025-12-09 00:11:19.658 +02:00 [DBG] Successfully validated the token.
2025-12-09 00:11:19.667 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-12-09 00:11:19.669 +02:00 [DBG] Authorization was successful.
2025-12-09 00:11:19.688 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-09 00:11:19.702 +02:00 [INF] Executing endpoint 'CleanArium.Controllers.AdminController.GetLogs (CleanArium)'
2025-12-09 00:11:19.748 +02:00 [INF] Route matched with {action = "GetLogs", controller = "Admin"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetLogs() on controller CleanArium.Controllers.AdminController (CleanArium).
2025-12-09 00:11:19.753 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-09 00:11:19.755 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-09 00:11:19.758 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-09 00:11:19.767 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-09 00:11:19.769 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-09 00:11:19.771 +02:00 [DBG] Executing controller factory for controller CleanArium.Controllers.AdminController (CleanArium)
2025-12-09 00:11:19.778 +02:00 [DBG] Executed controller factory for controller CleanArium.Controllers.AdminController (CleanArium)
2025-12-09 00:11:19.790 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-09 00:11:19.796 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-09 00:11:19.798 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-09 00:11:19.799 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-09 00:11:19.801 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-12-09 00:11:19.803 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2025-12-09 00:11:19.807 +02:00 [INF] Executed action CleanArium.Controllers.AdminController.GetLogs (CleanArium) in 37.089ms
2025-12-09 00:11:19.814 +02:00 [INF] Executed endpoint 'CleanArium.Controllers.AdminController.GetLogs (CleanArium)'
2025-12-09 00:11:19.816 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/api/Admin/logs - 404 null text/plain; charset=utf-8 194.0499ms
2025-12-09 00:11:24.304 +02:00 [DBG] Connection id "0HNHMKOQUP7FI" received FIN.
2025-12-09 00:11:24.485 +02:00 [DBG] Connection id "0HNHMKOQUP7FI" is closed. The last processed stream ID was 1.
2025-12-09 00:11:24.486 +02:00 [DBG] The connection queue processing loop for 0HNHMKOQUP7FI completed.
2025-12-09 00:11:24.487 +02:00 [DBG] Connection id "0HNHMKOQUP7FI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 00:11:24.499 +02:00 [DBG] Connection id "0HNHMKOQUP7FI" stopped.
2025-12-09 01:09:36.044 +02:00 [INF] Application starting
2025-12-09 01:09:36.685 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-12-09 01:09:39.203 +02:00 [DBG] Entity Framework Core 8.0.18 initialized 'CleanAriumDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.18' with options: MigrationsAssembly=Persistence 
2025-12-09 01:09:39.231 +02:00 [DBG] Creating DbConnection.
2025-12-09 01:09:39.356 +02:00 [DBG] Created DbConnection. (119ms).
2025-12-09 01:09:39.378 +02:00 [DBG] Migrating using database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:39.394 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:40.610 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:40.644 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-12-09 01:09:40.807 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (164ms).
2025-12-09 01:09:40.812 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (176ms).
2025-12-09 01:09:40.827 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-09 01:09:40.900 +02:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-09 01:09:40.920 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:40.944 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (14ms).
2025-12-09 01:09:41.059 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-12-09 01:09:41.075 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (17ms).
2025-12-09 01:09:41.078 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (19ms).
2025-12-09 01:09:41.080 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:41.083 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:41.086 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 01:09:41.132 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 01:09:41.141 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:41.143 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (2ms).
2025-12-09 01:09:41.146 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:41.147 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:41.149 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-12-09 01:09:41.150 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-12-09 01:09:41.151 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-12-09 01:09:41.153 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-09 01:09:41.156 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-09 01:09:41.160 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:41.161 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (1ms).
2025-12-09 01:09:41.163 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-12-09 01:09:41.164 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-12-09 01:09:41.166 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (2ms).
2025-12-09 01:09:41.167 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:41.169 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:41.171 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 01:09:41.177 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 01:09:41.180 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:41.184 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (3ms).
2025-12-09 01:09:41.218 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:41.221 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:41.225 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:09:41.227 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-09 01:09:41.229 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-12-09 01:09:41.232 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-09 01:09:41.364 +02:00 [INF] Executed DbCommand (132ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-09 01:09:41.388 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:41.397 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 11ms reading results.
2025-12-09 01:09:41.401 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:41.403 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (1ms).
2025-12-09 01:09:41.430 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-12-09 01:09:41.441 +02:00 [INF] Checking if admin user exists...
2025-12-09 01:09:41.590 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => (int)u.Role == 3)'
2025-12-09 01:09:42.055 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required MaxLength(255), 2], [Property: User.IsBlocked (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.PasswordHash (string) Required, 5], [Property: User.Role (UserRole) Required, 6], [Property: User.Salt (string) Required, 7], [Property: User.UserName (string) Required MaxLength(30), 8] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.Email, u.IsBlocked, u.LastLoginAt, u.PasswordHash, u.Role, u.Salt, u.UserName
            FROM CleanArium.Users AS u
            WHERE u.Role == 3), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Persistence.Application.CleanAriumDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-09 01:09:42.130 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:42.139 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:42.147 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:09:42.149 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-09 01:09:42.151 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-09 01:09:42.154 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Role] = 3
2025-12-09 01:09:42.273 +02:00 [INF] Executed DbCommand (119ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Role] = 3
2025-12-09 01:09:42.375 +02:00 [DBG] Context 'CleanAriumDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:09:42.468 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:42.476 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 193ms reading results.
2025-12-09 01:09:42.482 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:42.484 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (2ms).
2025-12-09 01:09:42.487 +02:00 [INF] Admin already exists. Skipping seeding.
2025-12-09 01:09:42.491 +02:00 [DBG] 'CleanAriumDbContext' disposed.
2025-12-09 01:09:42.498 +02:00 [DBG] Disposing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:42.502 +02:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-12-09 01:09:42.724 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-12-09 01:09:42.950 +02:00 [DBG] Hosting starting
2025-12-09 01:09:43.020 +02:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-09 01:09:43.069 +02:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-2bf296c1-e960-45a6-9b2e-1b3a7a4f6df5.xml'.
2025-12-09 01:09:43.071 +02:00 [INF] Refresh token cleanup service started.
2025-12-09 01:09:43.093 +02:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-39215358-ff03-452f-97d9-71001816138e.xml'.
2025-12-09 01:09:43.118 +02:00 [DBG] Entity Framework Core 8.0.18 initialized 'CleanAriumDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.18' with options: MigrationsAssembly=Persistence 
2025-12-09 01:09:43.121 +02:00 [DBG] Found key {2bf296c1-e960-45a6-9b2e-1b3a7a4f6df5}.
2025-12-09 01:09:43.155 +02:00 [DBG] Found key {39215358-ff03-452f-97d9-71001816138e}.
2025-12-09 01:09:43.181 +02:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Where(x => x.ExpiresAt < DateTime.UtcNow)'
2025-12-09 01:09:43.194 +02:00 [DBG] Considering key {2bf296c1-e960-45a6-9b2e-1b3a7a4f6df5} with expiration date 2026-01-29 22:22:30Z as default key.
2025-12-09 01:09:43.203 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RefreshToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.ExpiresAt (DateTime) Required, 1], [Property: RefreshToken.IsRevoked (bool) Required, 2], [Property: RefreshToken.Token (string) Required, 3], [Property: RefreshToken.UserId (long) Required FK Index, 4] }
        SELECT r.Id, r.ExpiresAt, r.IsRevoked, r.Token, r.UserId
        FROM CleanArium.RefreshTokens AS r
        WHERE r.ExpiresAt < GETUTCDATE()), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RefreshToken>, 
    Persistence.Application.CleanAriumDbContext, 
    False, 
    False, 
    True
)'
2025-12-09 01:09:43.208 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-09 01:09:43.217 +02:00 [DBG] Creating DbConnection.
2025-12-09 01:09:43.220 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-12-09 01:09:43.227 +02:00 [DBG] Created DbConnection. (10ms).
2025-12-09 01:09:43.234 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:43.247 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-09 01:09:43.250 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:43.279 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-12-09 01:09:43.311 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:09:43.315 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-12-09 01:09:43.316 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-12-09 01:09:43.319 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-12-09 01:09:43.321 +02:00 [DBG] Using key {2bf296c1-e960-45a6-9b2e-1b3a7a4f6df5} as the default key.
2025-12-09 01:09:43.322 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ExpiresAt], [r].[IsRevoked], [r].[Token], [r].[UserId]
FROM [CleanArium].[RefreshTokens] AS [r]
WHERE [r].[ExpiresAt] < GETUTCDATE()
2025-12-09 01:09:43.326 +02:00 [DBG] Key ring with default key {2bf296c1-e960-45a6-9b2e-1b3a7a4f6df5} was loaded during application startup.
2025-12-09 01:09:43.447 +02:00 [INF] Executed DbCommand (125ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ExpiresAt], [r].[IsRevoked], [r].[Token], [r].[UserId]
FROM [CleanArium].[RefreshTokens] AS [r]
WHERE [r].[ExpiresAt] < GETUTCDATE()
2025-12-09 01:09:43.474 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:43.480 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 6ms reading results.
2025-12-09 01:09:43.496 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:43.513 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (17ms).
2025-12-09 01:09:43.521 +02:00 [DBG] 'CleanAriumDbContext' disposed.
2025-12-09 01:09:43.527 +02:00 [DBG] Disposing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:09:43.529 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-09 01:09:44.004 +02:00 [INF] Now listening on: https://localhost:7085
2025-12-09 01:09:44.011 +02:00 [INF] Now listening on: http://localhost:5250
2025-12-09 01:09:44.017 +02:00 [DBG] Loaded hosting startup assembly CleanArium
2025-12-09 01:09:44.019 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-12-09 01:09:44.020 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-12-09 01:09:44.022 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-12-09 01:09:44.243 +02:00 [DBG] Connection id "0HNHMLRFUVF7G" accepted.
2025-12-09 01:09:44.250 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-09 01:09:44.280 +02:00 [DBG] Connection id "0HNHMLRFUVF7G" received FIN.
2025-12-09 01:09:44.277 +02:00 [DBG] Connection id "0HNHMLRFUVF7G" started.
2025-12-09 01:09:44.280 +02:00 [DBG] Connection id "0HNHMLRFUVF7H" received FIN.
2025-12-09 01:09:44.489 +02:00 [INF] Hosting environment: Development
2025-12-09 01:09:44.565 +02:00 [INF] Content root path: C:\Users\User\source\repos\CleanArium\CleanArium
2025-12-09 01:09:44.564 +02:00 [DBG] Connection id "0HNHMLRFUVF7H" accepted.
2025-12-09 01:09:44.567 +02:00 [DBG] Hosting started
2025-12-09 01:09:44.568 +02:00 [DBG] Connection id "0HNHMLRFUVF7H" started.
2025-12-09 01:09:45.403 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-12-09 01:09:45.403 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-12-09 01:09:45.987 +02:00 [DBG] Connection id "0HNHMLRFUVF7G" stopped.
2025-12-09 01:09:45.988 +02:00 [DBG] Connection id "0HNHMLRFUVF7H" stopped.
2025-12-09 01:09:46.005 +02:00 [DBG] Connection id "0HNHMLRFUVF7G" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 01:09:46.008 +02:00 [DBG] Connection id "0HNHMLRFUVF7H" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 01:09:46.872 +02:00 [DBG] Connection id "0HNHMLRFUVF7I" accepted.
2025-12-09 01:09:46.933 +02:00 [DBG] Connection id "0HNHMLRFUVF7I" started.
2025-12-09 01:09:47.106 +02:00 [DBG] Connection 0HNHMLRFUVF7I established using the following protocol: "Tls13"
2025-12-09 01:09:47.321 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/swagger/index.html - null null
2025-12-09 01:09:47.734 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-12-09 01:09:47.804 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-12-09 01:09:47.813 +02:00 [DBG] Request did not match any endpoints
2025-12-09 01:09:48.006 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-09 01:09:48.175 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-12-09 01:09:48.186 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-12-09 01:09:48.237 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-12-09 01:09:48.244 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-12-09 01:09:48.256 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/swagger/index.html - 200 null text/html;charset=utf-8 956.6341ms
2025-12-09 01:09:48.636 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/_framework/aspnetcore-browser-refresh.js - null null
2025-12-09 01:09:48.638 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/_vs/browserLink - null null
2025-12-09 01:09:48.685 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 49.6444ms
2025-12-09 01:09:49.196 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/_vs/browserLink - 200 null text/javascript; charset=UTF-8 558.0682ms
2025-12-09 01:09:49.406 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/swagger/v1/swagger.json - null null
2025-12-09 01:09:49.556 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-12-09 01:09:49.560 +02:00 [DBG] Request did not match any endpoints
2025-12-09 01:09:49.565 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-09 01:09:49.648 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 242.8033ms
2025-12-09 01:09:51.838 +02:00 [DBG] Connection id "0HNHMLRFUVF7I" received FIN.
2025-12-09 01:09:51.857 +02:00 [DBG] Connection id "0HNHMLRFUVF7I" is closed. The last processed stream ID was 7.
2025-12-09 01:09:51.859 +02:00 [DBG] The connection queue processing loop for 0HNHMLRFUVF7I completed.
2025-12-09 01:09:51.862 +02:00 [DBG] Connection id "0HNHMLRFUVF7I" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 01:09:51.885 +02:00 [DBG] Connection id "0HNHMLRFUVF7I" stopped.
2025-12-09 01:10:18.412 +02:00 [DBG] Connection id "0HNHMLRFUVF7J" accepted.
2025-12-09 01:10:18.428 +02:00 [DBG] Connection id "0HNHMLRFUVF7J" started.
2025-12-09 01:10:18.457 +02:00 [DBG] Connection 0HNHMLRFUVF7J established using the following protocol: "Tls13"
2025-12-09 01:10:18.471 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7085/api/Auth/login - application/json 61
2025-12-09 01:10:18.486 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-12-09 01:10:18.495 +02:00 [DBG] Endpoint 'CleanArium.Controllers.AuthController.Login (CleanArium)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-12-09 01:10:18.500 +02:00 [DBG] Request matched endpoint 'CleanArium.Controllers.AuthController.Login (CleanArium)'
2025-12-09 01:10:18.508 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-09 01:10:18.513 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-09 01:10:18.516 +02:00 [INF] Executing endpoint 'CleanArium.Controllers.AuthController.Login (CleanArium)'
2025-12-09 01:10:18.586 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(CleanArium.Contracts.Auth.LoginRequest) on controller CleanArium.Controllers.AuthController (CleanArium).
2025-12-09 01:10:18.595 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-09 01:10:18.598 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-09 01:10:18.600 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-09 01:10:18.605 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-09 01:10:18.666 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-09 01:10:18.680 +02:00 [DBG] Executing controller factory for controller CleanArium.Controllers.AuthController (CleanArium)
2025-12-09 01:10:18.691 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-09 01:10:18.695 +02:00 [DBG] Executed controller factory for controller CleanArium.Controllers.AuthController (CleanArium)
2025-12-09 01:10:18.804 +02:00 [DBG] Attempting to bind parameter 'request' of type 'CleanArium.Contracts.Auth.LoginRequest' ...
2025-12-09 01:10:18.811 +02:00 [DBG] Attempting to bind parameter 'request' of type 'CleanArium.Contracts.Auth.LoginRequest' using the name '' in request data ...
2025-12-09 01:10:18.815 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-12-09 01:10:18.828 +02:00 [DBG] Connection id "0HNHMLRFUVF7J", Request id "0HNHMLRFUVF7J:00000001": started reading request body.
2025-12-09 01:10:18.830 +02:00 [DBG] Connection id "0HNHMLRFUVF7J", Request id "0HNHMLRFUVF7J:00000001": done reading request body.
2025-12-09 01:10:18.848 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'CleanArium.Contracts.Auth.LoginRequest'
2025-12-09 01:10:18.850 +02:00 [DBG] Done attempting to bind parameter 'request' of type 'CleanArium.Contracts.Auth.LoginRequest'.
2025-12-09 01:10:18.852 +02:00 [DBG] Done attempting to bind parameter 'request' of type 'CleanArium.Contracts.Auth.LoginRequest'.
2025-12-09 01:10:18.853 +02:00 [DBG] Attempting to validate the bound parameter 'request' of type 'CleanArium.Contracts.Auth.LoginRequest' ...
2025-12-09 01:10:18.869 +02:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'CleanArium.Contracts.Auth.LoginRequest'.
2025-12-09 01:10:19.064 +02:00 [DBG] Entity Framework Core 8.0.18 initialized 'CleanAriumDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.18' with options: MigrationsAssembly=Persistence 
2025-12-09 01:10:19.072 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(x => x.Email == __email_0)'
2025-12-09 01:10:19.097 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required MaxLength(255), 2], [Property: User.IsBlocked (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.PasswordHash (string) Required, 5], [Property: User.Role (UserRole) Required, 6], [Property: User.Salt (string) Required, 7], [Property: User.UserName (string) Required MaxLength(30), 8] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.Email, u.IsBlocked, u.LastLoginAt, u.PasswordHash, u.Role, u.Salt, u.UserName
            FROM CleanArium.Users AS u
            WHERE u.Email == @__email_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Persistence.Application.CleanAriumDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-09 01:10:19.116 +02:00 [DBG] Creating DbConnection.
2025-12-09 01:10:19.117 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-09 01:10:19.119 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:10:19.121 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:10:19.126 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:10:19.129 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-12-09 01:10:19.137 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-12-09 01:10:19.167 +02:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-12-09 01:10:19.386 +02:00 [INF] Executed DbCommand (217ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-12-09 01:10:19.420 +02:00 [DBG] Context 'CleanAriumDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:10:19.463 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:10:19.470 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 52ms reading results.
2025-12-09 01:10:19.482 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:10:19.486 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (3ms).
2025-12-09 01:10:19.530 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:10:19.650 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:10:19.721 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:10:19.732 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (11ms).
2025-12-09 01:10:19.736 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
2025-12-09 01:10:19.750 +02:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-12-09 01:10:19.915 +02:00 [INF] Executed DbCommand (165ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-12-09 01:10:19.922 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:10:19.933 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 11ms reading results.
2025-12-09 01:10:19.936 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:10:19.939 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (2ms).
2025-12-09 01:10:20.133 +02:00 [DBG] 'CleanAriumDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:10:20.199 +02:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:10:20.238 +02:00 [DBG] Context 'CleanAriumDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:10:20.250 +02:00 [DBG] SaveChanges starting for 'CleanAriumDbContext'.
2025-12-09 01:10:20.258 +02:00 [DBG] DetectChanges starting for 'CleanAriumDbContext'.
2025-12-09 01:10:20.323 +02:00 [DBG] DetectChanges completed for 'CleanAriumDbContext'.
2025-12-09 01:10:20.557 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:10:20.577 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:10:20.717 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:10:20.721 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-12-09 01:10:20.728 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-12-09 01:10:20.731 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CleanArium].[RefreshTokens] ([ExpiresAt], [IsRevoked], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-12-09 01:10:20.820 +02:00 [INF] Executed DbCommand (90ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CleanArium].[RefreshTokens] ([ExpiresAt], [IsRevoked], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-12-09 01:10:20.851 +02:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-12-09 01:10:20.866 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:10:20.869 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 43ms reading results.
2025-12-09 01:10:20.876 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:10:20.901 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (24ms).
2025-12-09 01:10:20.970 +02:00 [DBG] An entity of type 'RefreshToken' tracked by 'CleanAriumDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:10:20.987 +02:00 [DBG] SaveChanges completed for 'CleanAriumDbContext' with 1 entities written to the database.
2025-12-09 01:10:20.992 +02:00 [INF] Successful login for user: 1 
2025-12-09 01:10:20.997 +02:00 [DBG] An entity of type 'User' tracked by 'CleanAriumDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:10:21.000 +02:00 [DBG] SaveChanges starting for 'CleanAriumDbContext'.
2025-12-09 01:10:21.002 +02:00 [DBG] DetectChanges starting for 'CleanAriumDbContext'.
2025-12-09 01:10:21.004 +02:00 [DBG] DetectChanges completed for 'CleanAriumDbContext'.
2025-12-09 01:10:21.018 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:10:21.019 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:10:21.021 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:10:21.024 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-09 01:10:21.026 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-12-09 01:10:21.028 +02:00 [DBG] Executing DbCommand [Parameters=[@p8='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (Size = 30)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [CleanArium].[Users] SET [CreatedAt] = @p0, [Email] = @p1, [IsBlocked] = @p2, [LastLoginAt] = @p3, [PasswordHash] = @p4, [Role] = @p5, [Salt] = @p6, [UserName] = @p7
OUTPUT 1
WHERE [Id] = @p8;
2025-12-09 01:10:21.071 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@p8='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (Size = 30)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [CleanArium].[Users] SET [CreatedAt] = @p0, [Email] = @p1, [IsBlocked] = @p2, [LastLoginAt] = @p3, [PasswordHash] = @p4, [Role] = @p5, [Salt] = @p6, [UserName] = @p7
OUTPUT 1
WHERE [Id] = @p8;
2025-12-09 01:10:21.081 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:10:21.088 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 10ms reading results.
2025-12-09 01:10:21.092 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:10:21.094 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (2ms).
2025-12-09 01:10:21.100 +02:00 [DBG] An entity of type 'User' tracked by 'CleanAriumDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:10:21.104 +02:00 [DBG] SaveChanges completed for 'CleanAriumDbContext' with 1 entities written to the database.
2025-12-09 01:10:21.118 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-09 01:10:21.123 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-09 01:10:21.125 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-09 01:10:21.127 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-09 01:10:21.131 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-09 01:10:21.133 +02:00 [INF] Executing OkObjectResult, writing value of type 'Application.DTOs.Auth.AuthResponseDto'.
2025-12-09 01:10:21.150 +02:00 [INF] Executed action CleanArium.Controllers.AuthController.Login (CleanArium) in 2467.7793ms
2025-12-09 01:10:21.153 +02:00 [INF] Executed endpoint 'CleanArium.Controllers.AuthController.Login (CleanArium)'
2025-12-09 01:10:21.158 +02:00 [DBG] 'CleanAriumDbContext' disposed.
2025-12-09 01:10:21.170 +02:00 [DBG] Disposing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:10:21.172 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-09 01:10:21.262 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7085/api/Auth/login - 200 null application/json; charset=utf-8 2791.9463ms
2025-12-09 01:10:26.872 +02:00 [DBG] Connection id "0HNHMLRFUVF7J" received FIN.
2025-12-09 01:10:26.897 +02:00 [DBG] Connection id "0HNHMLRFUVF7J" is closed. The last processed stream ID was 1.
2025-12-09 01:10:26.898 +02:00 [DBG] The connection queue processing loop for 0HNHMLRFUVF7J completed.
2025-12-09 01:10:26.901 +02:00 [DBG] Connection id "0HNHMLRFUVF7J" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 01:10:26.922 +02:00 [DBG] Connection id "0HNHMLRFUVF7J" stopped.
2025-12-09 01:10:36.668 +02:00 [DBG] Connection id "0HNHMLRFUVF7K" accepted.
2025-12-09 01:10:36.778 +02:00 [DBG] Connection id "0HNHMLRFUVF7K" started.
2025-12-09 01:10:36.787 +02:00 [DBG] Connection 0HNHMLRFUVF7K established using the following protocol: "Tls13"
2025-12-09 01:10:36.796 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/api/Admin/moderators - null null
2025-12-09 01:10:36.802 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Admin/moderators'
2025-12-09 01:10:36.804 +02:00 [DBG] Endpoint 'CleanArium.Controllers.AdminController.GetModerators (CleanArium)' with route pattern 'api/Admin/moderators' is valid for the request path '/api/Admin/moderators'
2025-12-09 01:10:36.808 +02:00 [DBG] Request matched endpoint 'CleanArium.Controllers.AdminController.GetModerators (CleanArium)'
2025-12-09 01:10:36.929 +02:00 [DBG] Successfully validated the token.
2025-12-09 01:10:36.934 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-12-09 01:10:36.962 +02:00 [DBG] Authorization was successful.
2025-12-09 01:10:36.965 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-09 01:10:36.971 +02:00 [INF] Executing endpoint 'CleanArium.Controllers.AdminController.GetModerators (CleanArium)'
2025-12-09 01:10:36.986 +02:00 [INF] Route matched with {action = "GetModerators", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetModerators() on controller CleanArium.Controllers.AdminController (CleanArium).
2025-12-09 01:10:36.989 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-09 01:10:36.995 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-09 01:10:36.997 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-09 01:10:37.000 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-09 01:10:37.002 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-09 01:10:37.008 +02:00 [DBG] Executing controller factory for controller CleanArium.Controllers.AdminController (CleanArium)
2025-12-09 01:10:37.011 +02:00 [DBG] Executed controller factory for controller CleanArium.Controllers.AdminController (CleanArium)
2025-12-09 01:10:37.021 +02:00 [DBG] Entity Framework Core 8.0.18 initialized 'CleanAriumDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.18' with options: MigrationsAssembly=Persistence 
2025-12-09 01:10:37.030 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Where(x => (int)x.Role == 2)'
2025-12-09 01:10:37.037 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required MaxLength(255), 2], [Property: User.IsBlocked (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.PasswordHash (string) Required, 5], [Property: User.Role (UserRole) Required, 6], [Property: User.Salt (string) Required, 7], [Property: User.UserName (string) Required MaxLength(30), 8] }
        SELECT u.Id, u.CreatedAt, u.Email, u.IsBlocked, u.LastLoginAt, u.PasswordHash, u.Role, u.Salt, u.UserName
        FROM CleanArium.Users AS u
        WHERE u.Role == 2), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    Persistence.Application.CleanAriumDbContext, 
    False, 
    False, 
    True
)'
2025-12-09 01:10:37.042 +02:00 [DBG] Creating DbConnection.
2025-12-09 01:10:37.044 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-09 01:10:37.045 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:10:37.047 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:10:37.048 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:10:37.050 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-09 01:10:37.051 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-09 01:10:37.053 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Role] = 2
2025-12-09 01:10:37.080 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Role] = 2
2025-12-09 01:10:37.084 +02:00 [DBG] Context 'CleanAriumDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:10:37.086 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:10:37.088 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 5ms reading results.
2025-12-09 01:10:37.091 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:10:37.093 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (1ms).
2025-12-09 01:10:37.097 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-09 01:10:37.100 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-09 01:10:37.102 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-09 01:10:37.103 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-09 01:10:37.104 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-09 01:10:37.106 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Application.DTOs.Users.ModeratorDto, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-09 01:10:37.135 +02:00 [INF] Executed action CleanArium.Controllers.AdminController.GetModerators (CleanArium) in 127.0006ms
2025-12-09 01:10:37.137 +02:00 [INF] Executed endpoint 'CleanArium.Controllers.AdminController.GetModerators (CleanArium)'
2025-12-09 01:10:37.138 +02:00 [DBG] 'CleanAriumDbContext' disposed.
2025-12-09 01:10:37.145 +02:00 [DBG] Disposing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:10:37.146 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-09 01:10:37.148 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/api/Admin/moderators - 200 null application/json; charset=utf-8 352.198ms
2025-12-09 01:10:41.895 +02:00 [DBG] Connection id "0HNHMLRFUVF7K" received FIN.
2025-12-09 01:10:41.914 +02:00 [DBG] Connection id "0HNHMLRFUVF7K" is closed. The last processed stream ID was 1.
2025-12-09 01:10:41.915 +02:00 [DBG] The connection queue processing loop for 0HNHMLRFUVF7K completed.
2025-12-09 01:10:41.972 +02:00 [DBG] Connection id "0HNHMLRFUVF7K" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 01:10:41.989 +02:00 [DBG] Connection id "0HNHMLRFUVF7K" stopped.
2025-12-09 01:10:49.158 +02:00 [DBG] Connection id "0HNHMLRFUVF7L" accepted.
2025-12-09 01:10:49.189 +02:00 [DBG] Connection id "0HNHMLRFUVF7L" started.
2025-12-09 01:10:49.219 +02:00 [DBG] Connection 0HNHMLRFUVF7L established using the following protocol: "Tls13"
2025-12-09 01:10:49.230 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/api/AlarmRule/get-by-id/1 - null null
2025-12-09 01:10:49.234 +02:00 [DBG] 1 candidate(s) found for the request path '/api/AlarmRule/get-by-id/1'
2025-12-09 01:10:49.236 +02:00 [DBG] Endpoint 'CleanArium.Controllers.AlarmRuleController.GetById (CleanArium)' with route pattern 'api/AlarmRule/get-by-id/{ruleId:long}' is valid for the request path '/api/AlarmRule/get-by-id/1'
2025-12-09 01:10:49.238 +02:00 [DBG] Request matched endpoint 'CleanArium.Controllers.AlarmRuleController.GetById (CleanArium)'
2025-12-09 01:10:49.241 +02:00 [DBG] Successfully validated the token.
2025-12-09 01:10:49.243 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-12-09 01:10:49.249 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2025-12-09 01:10:49.253 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-12-09 01:10:49.255 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/api/AlarmRule/get-by-id/1 - 403 0 null 24.1796ms
2025-12-09 01:10:56.901 +02:00 [DBG] Connection id "0HNHMLRFUVF7L" received FIN.
2025-12-09 01:10:56.908 +02:00 [DBG] Connection id "0HNHMLRFUVF7L" is closed. The last processed stream ID was 1.
2025-12-09 01:10:56.908 +02:00 [DBG] The connection queue processing loop for 0HNHMLRFUVF7L completed.
2025-12-09 01:10:56.910 +02:00 [DBG] Connection id "0HNHMLRFUVF7L" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 01:10:56.916 +02:00 [DBG] Connection id "0HNHMLRFUVF7L" stopped.
2025-12-09 01:12:32.504 +02:00 [DBG] Connection id "0HNHMLRFUVF7M" accepted.
2025-12-09 01:12:32.521 +02:00 [DBG] Connection id "0HNHMLRFUVF7M" started.
2025-12-09 01:12:32.535 +02:00 [DBG] Connection 0HNHMLRFUVF7M established using the following protocol: "Tls13"
2025-12-09 01:12:32.555 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7085/api/AlarmRule/1/deactivate - null 0
2025-12-09 01:12:32.570 +02:00 [DBG] 1 candidate(s) found for the request path '/api/AlarmRule/1/deactivate'
2025-12-09 01:12:32.574 +02:00 [DBG] Endpoint 'CleanArium.Controllers.AlarmRuleController.DeactivateAlarmRule (CleanArium)' with route pattern 'api/AlarmRule/{id}/deactivate' is valid for the request path '/api/AlarmRule/1/deactivate'
2025-12-09 01:12:32.577 +02:00 [DBG] Request matched endpoint 'CleanArium.Controllers.AlarmRuleController.DeactivateAlarmRule (CleanArium)'
2025-12-09 01:12:32.579 +02:00 [DBG] Successfully validated the token.
2025-12-09 01:12:32.580 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-12-09 01:12:32.583 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2025-12-09 01:12:32.585 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-12-09 01:12:32.586 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7085/api/AlarmRule/1/deactivate - 403 0 null 32.6997ms
2025-12-09 01:12:42.056 +02:00 [DBG] Connection id "0HNHMLRFUVF7M" received FIN.
2025-12-09 01:12:42.058 +02:00 [DBG] Connection id "0HNHMLRFUVF7M" is closed. The last processed stream ID was 1.
2025-12-09 01:12:42.059 +02:00 [DBG] The connection queue processing loop for 0HNHMLRFUVF7M completed.
2025-12-09 01:12:42.061 +02:00 [DBG] Connection id "0HNHMLRFUVF7M" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 01:12:42.071 +02:00 [DBG] Connection id "0HNHMLRFUVF7M" stopped.
2025-12-09 01:12:55.763 +02:00 [DBG] Connection id "0HNHMLRFUVF7N" accepted.
2025-12-09 01:12:55.768 +02:00 [DBG] Connection id "0HNHMLRFUVF7N" started.
2025-12-09 01:12:55.780 +02:00 [DBG] Connection 0HNHMLRFUVF7N established using the following protocol: "Tls13"
2025-12-09 01:12:55.828 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/api/Admin/logs - null null
2025-12-09 01:12:55.881 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Admin/logs'
2025-12-09 01:12:55.916 +02:00 [DBG] Endpoint 'CleanArium.Controllers.AdminController.GetLogs (CleanArium)' with route pattern 'api/Admin/logs' is valid for the request path '/api/Admin/logs'
2025-12-09 01:12:55.919 +02:00 [DBG] Request matched endpoint 'CleanArium.Controllers.AdminController.GetLogs (CleanArium)'
2025-12-09 01:12:55.928 +02:00 [DBG] Successfully validated the token.
2025-12-09 01:12:55.936 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-12-09 01:12:55.938 +02:00 [DBG] Authorization was successful.
2025-12-09 01:12:55.981 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-09 01:12:55.984 +02:00 [INF] Executing endpoint 'CleanArium.Controllers.AdminController.GetLogs (CleanArium)'
2025-12-09 01:12:56.011 +02:00 [INF] Route matched with {action = "GetLogs", controller = "Admin"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetLogs() on controller CleanArium.Controllers.AdminController (CleanArium).
2025-12-09 01:12:56.014 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-09 01:12:56.016 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-09 01:12:56.018 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-09 01:12:56.020 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-09 01:12:56.033 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-09 01:12:56.043 +02:00 [DBG] Executing controller factory for controller CleanArium.Controllers.AdminController (CleanArium)
2025-12-09 01:12:56.050 +02:00 [DBG] Executed controller factory for controller CleanArium.Controllers.AdminController (CleanArium)
2025-12-09 01:12:56.060 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-09 01:12:56.064 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-09 01:12:56.065 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-09 01:12:56.069 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-09 01:12:56.071 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-12-09 01:12:56.078 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2025-12-09 01:12:56.086 +02:00 [INF] Executed action CleanArium.Controllers.AdminController.GetLogs (CleanArium) in 42.5543ms
2025-12-09 01:12:56.087 +02:00 [INF] Executed endpoint 'CleanArium.Controllers.AdminController.GetLogs (CleanArium)'
2025-12-09 01:12:56.089 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/api/Admin/logs - 404 null text/plain; charset=utf-8 261.4143ms
2025-12-09 01:24:34.619 +02:00 [INF] Application starting
2025-12-09 01:24:35.236 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-12-09 01:24:37.491 +02:00 [DBG] Entity Framework Core 8.0.18 initialized 'CleanAriumDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.18' with options: MigrationsAssembly=Persistence 
2025-12-09 01:24:37.517 +02:00 [DBG] Creating DbConnection.
2025-12-09 01:24:37.638 +02:00 [DBG] Created DbConnection. (116ms).
2025-12-09 01:24:37.660 +02:00 [DBG] Migrating using database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:37.722 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:38.668 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:38.688 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-12-09 01:24:38.706 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (17ms).
2025-12-09 01:24:38.722 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (39ms).
2025-12-09 01:24:38.740 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-09 01:24:38.827 +02:00 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-09 01:24:38.834 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:38.852 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (11ms).
2025-12-09 01:24:38.861 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-12-09 01:24:38.863 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-12-09 01:24:38.865 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-12-09 01:24:38.867 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:38.870 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:38.873 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 01:24:38.930 +02:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 01:24:38.933 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:38.936 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (2ms).
2025-12-09 01:24:38.941 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:38.962 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:38.964 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-12-09 01:24:38.965 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-12-09 01:24:38.967 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (3ms).
2025-12-09 01:24:38.969 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-09 01:24:38.974 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-09 01:24:38.978 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:38.980 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (2ms).
2025-12-09 01:24:38.982 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-12-09 01:24:38.983 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-12-09 01:24:38.985 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-12-09 01:24:38.987 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:38.990 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:38.992 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 01:24:38.995 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 01:24:38.998 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:39.000 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (1ms).
2025-12-09 01:24:39.033 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:39.036 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:39.039 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:24:39.041 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-09 01:24:39.043 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-12-09 01:24:39.046 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-09 01:24:39.099 +02:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-09 01:24:39.105 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:39.109 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 5ms reading results.
2025-12-09 01:24:39.112 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:39.114 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (2ms).
2025-12-09 01:24:39.137 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-12-09 01:24:39.147 +02:00 [INF] Checking if admin user exists...
2025-12-09 01:24:39.381 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => (int)u.Role == 3)'
2025-12-09 01:24:40.250 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required MaxLength(255), 2], [Property: User.IsBlocked (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.PasswordHash (string) Required, 5], [Property: User.Role (UserRole) Required, 6], [Property: User.Salt (string) Required, 7], [Property: User.UserName (string) Required MaxLength(30), 8] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.Email, u.IsBlocked, u.LastLoginAt, u.PasswordHash, u.Role, u.Salt, u.UserName
            FROM CleanArium.Users AS u
            WHERE u.Role == 3), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Persistence.Application.CleanAriumDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-09 01:24:40.393 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:40.398 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:40.400 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:24:40.401 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-09 01:24:40.402 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-09 01:24:40.404 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Role] = 3
2025-12-09 01:24:41.550 +02:00 [INF] Executed DbCommand (1,146ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Role] = 3
2025-12-09 01:24:41.661 +02:00 [DBG] Context 'CleanAriumDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:24:41.761 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:41.767 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 205ms reading results.
2025-12-09 01:24:41.772 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:41.775 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (3ms).
2025-12-09 01:24:41.777 +02:00 [INF] Admin already exists. Skipping seeding.
2025-12-09 01:24:41.787 +02:00 [DBG] 'CleanAriumDbContext' disposed.
2025-12-09 01:24:41.792 +02:00 [DBG] Disposing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:41.795 +02:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-12-09 01:24:42.323 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-12-09 01:24:42.495 +02:00 [DBG] Hosting starting
2025-12-09 01:24:42.551 +02:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-09 01:24:42.584 +02:00 [INF] Refresh token cleanup service started.
2025-12-09 01:24:42.591 +02:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-2bf296c1-e960-45a6-9b2e-1b3a7a4f6df5.xml'.
2025-12-09 01:24:42.621 +02:00 [DBG] Entity Framework Core 8.0.18 initialized 'CleanAriumDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.18' with options: MigrationsAssembly=Persistence 
2025-12-09 01:24:42.628 +02:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-39215358-ff03-452f-97d9-71001816138e.xml'.
2025-12-09 01:24:42.641 +02:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Where(x => x.ExpiresAt < DateTime.UtcNow)'
2025-12-09 01:24:42.680 +02:00 [DBG] Found key {2bf296c1-e960-45a6-9b2e-1b3a7a4f6df5}.
2025-12-09 01:24:42.709 +02:00 [DBG] Found key {39215358-ff03-452f-97d9-71001816138e}.
2025-12-09 01:24:42.716 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RefreshToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.ExpiresAt (DateTime) Required, 1], [Property: RefreshToken.IsRevoked (bool) Required, 2], [Property: RefreshToken.Token (string) Required, 3], [Property: RefreshToken.UserId (long) Required FK Index, 4] }
        SELECT r.Id, r.ExpiresAt, r.IsRevoked, r.Token, r.UserId
        FROM CleanArium.RefreshTokens AS r
        WHERE r.ExpiresAt < GETUTCDATE()), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RefreshToken>, 
    Persistence.Application.CleanAriumDbContext, 
    False, 
    False, 
    True
)'
2025-12-09 01:24:42.734 +02:00 [DBG] Considering key {2bf296c1-e960-45a6-9b2e-1b3a7a4f6df5} with expiration date 2026-01-29 22:22:30Z as default key.
2025-12-09 01:24:42.742 +02:00 [DBG] Creating DbConnection.
2025-12-09 01:24:42.771 +02:00 [DBG] Created DbConnection. (29ms).
2025-12-09 01:24:42.775 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-09 01:24:42.775 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:42.778 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-12-09 01:24:42.780 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:42.787 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-09 01:24:42.787 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:24:42.812 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (25ms).
2025-12-09 01:24:42.814 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-12-09 01:24:42.815 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (28ms).
2025-12-09 01:24:42.819 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-12-09 01:24:42.835 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ExpiresAt], [r].[IsRevoked], [r].[Token], [r].[UserId]
FROM [CleanArium].[RefreshTokens] AS [r]
WHERE [r].[ExpiresAt] < GETUTCDATE()
2025-12-09 01:24:42.847 +02:00 [DBG] Using key {2bf296c1-e960-45a6-9b2e-1b3a7a4f6df5} as the default key.
2025-12-09 01:24:42.869 +02:00 [DBG] Key ring with default key {2bf296c1-e960-45a6-9b2e-1b3a7a4f6df5} was loaded during application startup.
2025-12-09 01:24:42.983 +02:00 [INF] Executed DbCommand (147ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ExpiresAt], [r].[IsRevoked], [r].[Token], [r].[UserId]
FROM [CleanArium].[RefreshTokens] AS [r]
WHERE [r].[ExpiresAt] < GETUTCDATE()
2025-12-09 01:24:43.003 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:43.007 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 5ms reading results.
2025-12-09 01:24:43.011 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:43.042 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (31ms).
2025-12-09 01:24:43.046 +02:00 [DBG] 'CleanAriumDbContext' disposed.
2025-12-09 01:24:43.057 +02:00 [DBG] Disposing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:24:43.060 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-09 01:24:43.425 +02:00 [INF] Now listening on: https://localhost:7085
2025-12-09 01:24:43.428 +02:00 [INF] Now listening on: http://localhost:5250
2025-12-09 01:24:43.430 +02:00 [DBG] Loaded hosting startup assembly CleanArium
2025-12-09 01:24:43.432 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-12-09 01:24:43.433 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-12-09 01:24:43.436 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-12-09 01:24:43.735 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-09 01:24:43.737 +02:00 [INF] Hosting environment: Development
2025-12-09 01:24:43.740 +02:00 [INF] Content root path: C:\Users\User\source\repos\CleanArium\CleanArium
2025-12-09 01:24:43.742 +02:00 [DBG] Hosting started
2025-12-09 01:24:43.918 +02:00 [DBG] Connection id "0HNHMM3S2UBCM" received FIN.
2025-12-09 01:24:43.925 +02:00 [DBG] Connection id "0HNHMM3S2UBCN" received FIN.
2025-12-09 01:24:43.946 +02:00 [DBG] Connection id "0HNHMM3S2UBCM" accepted.
2025-12-09 01:24:43.955 +02:00 [DBG] Connection id "0HNHMM3S2UBCN" accepted.
2025-12-09 01:24:43.966 +02:00 [DBG] Connection id "0HNHMM3S2UBCM" started.
2025-12-09 01:24:43.971 +02:00 [DBG] Connection id "0HNHMM3S2UBCN" started.
2025-12-09 01:24:44.019 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-12-09 01:24:44.046 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-12-09 01:24:44.149 +02:00 [DBG] Connection id "0HNHMM3S2UBCN" stopped.
2025-12-09 01:24:44.149 +02:00 [DBG] Connection id "0HNHMM3S2UBCM" stopped.
2025-12-09 01:24:44.172 +02:00 [DBG] Connection id "0HNHMM3S2UBCM" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 01:24:44.173 +02:00 [DBG] Connection id "0HNHMM3S2UBCN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 01:24:45.198 +02:00 [DBG] Connection id "0HNHMM3S2UBCO" accepted.
2025-12-09 01:24:45.248 +02:00 [DBG] Connection id "0HNHMM3S2UBCO" started.
2025-12-09 01:24:45.424 +02:00 [DBG] Connection 0HNHMM3S2UBCO established using the following protocol: "Tls13"
2025-12-09 01:24:45.717 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/swagger/index.html - null null
2025-12-09 01:24:46.064 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-12-09 01:24:46.146 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-12-09 01:24:46.159 +02:00 [DBG] Request did not match any endpoints
2025-12-09 01:24:46.587 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-09 01:24:47.009 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-12-09 01:24:47.226 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-12-09 01:24:47.303 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-12-09 01:24:47.306 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-12-09 01:24:47.317 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/swagger/index.html - 200 null text/html;charset=utf-8 1621.3113ms
2025-12-09 01:24:47.383 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/_framework/aspnetcore-browser-refresh.js - null null
2025-12-09 01:24:47.417 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/_vs/browserLink - null null
2025-12-09 01:24:47.453 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 70.2383ms
2025-12-09 01:24:47.587 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/_vs/browserLink - 200 null text/javascript; charset=UTF-8 169.9747ms
2025-12-09 01:24:47.787 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/swagger/v1/swagger.json - null null
2025-12-09 01:24:47.998 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-12-09 01:24:48.000 +02:00 [DBG] Request did not match any endpoints
2025-12-09 01:24:48.003 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-09 01:24:48.214 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 427.1469ms
2025-12-09 01:24:58.165 +02:00 [DBG] Connection id "0HNHMM3S2UBCO" received FIN.
2025-12-09 01:24:58.170 +02:00 [DBG] Connection id "0HNHMM3S2UBCO" is closed. The last processed stream ID was 7.
2025-12-09 01:24:58.173 +02:00 [DBG] Connection id "0HNHMM3S2UBCO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 01:24:58.173 +02:00 [DBG] The connection queue processing loop for 0HNHMM3S2UBCO completed.
2025-12-09 01:24:58.178 +02:00 [DBG] Connection id "0HNHMM3S2UBCO" stopped.
2025-12-09 01:26:20.063 +02:00 [DBG] Connection id "0HNHMM3S2UBCP" accepted.
2025-12-09 01:26:20.065 +02:00 [DBG] Connection id "0HNHMM3S2UBCP" started.
2025-12-09 01:26:20.151 +02:00 [DBG] Connection 0HNHMM3S2UBCP established using the following protocol: "Tls13"
2025-12-09 01:26:20.163 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7085/api/Auth/login - application/json 61
2025-12-09 01:26:20.182 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-12-09 01:26:20.221 +02:00 [DBG] Endpoint 'CleanArium.Controllers.AuthController.Login (CleanArium)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-12-09 01:26:20.247 +02:00 [DBG] Request matched endpoint 'CleanArium.Controllers.AuthController.Login (CleanArium)'
2025-12-09 01:26:20.257 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-09 01:26:20.267 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-09 01:26:20.271 +02:00 [INF] Executing endpoint 'CleanArium.Controllers.AuthController.Login (CleanArium)'
2025-12-09 01:26:20.360 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(CleanArium.Contracts.Auth.LoginRequest) on controller CleanArium.Controllers.AuthController (CleanArium).
2025-12-09 01:26:20.371 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-09 01:26:20.378 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-09 01:26:20.381 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-09 01:26:20.384 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-09 01:26:20.386 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-09 01:26:20.398 +02:00 [DBG] Executing controller factory for controller CleanArium.Controllers.AuthController (CleanArium)
2025-12-09 01:26:20.410 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-09 01:26:20.412 +02:00 [DBG] Executed controller factory for controller CleanArium.Controllers.AuthController (CleanArium)
2025-12-09 01:26:20.496 +02:00 [DBG] Attempting to bind parameter 'request' of type 'CleanArium.Contracts.Auth.LoginRequest' ...
2025-12-09 01:26:20.501 +02:00 [DBG] Attempting to bind parameter 'request' of type 'CleanArium.Contracts.Auth.LoginRequest' using the name '' in request data ...
2025-12-09 01:26:20.507 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-12-09 01:26:20.524 +02:00 [DBG] Connection id "0HNHMM3S2UBCP", Request id "0HNHMM3S2UBCP:00000001": started reading request body.
2025-12-09 01:26:20.526 +02:00 [DBG] Connection id "0HNHMM3S2UBCP", Request id "0HNHMM3S2UBCP:00000001": done reading request body.
2025-12-09 01:26:20.548 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'CleanArium.Contracts.Auth.LoginRequest'
2025-12-09 01:26:20.550 +02:00 [DBG] Done attempting to bind parameter 'request' of type 'CleanArium.Contracts.Auth.LoginRequest'.
2025-12-09 01:26:20.552 +02:00 [DBG] Done attempting to bind parameter 'request' of type 'CleanArium.Contracts.Auth.LoginRequest'.
2025-12-09 01:26:20.554 +02:00 [DBG] Attempting to validate the bound parameter 'request' of type 'CleanArium.Contracts.Auth.LoginRequest' ...
2025-12-09 01:26:20.571 +02:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'CleanArium.Contracts.Auth.LoginRequest'.
2025-12-09 01:26:20.840 +02:00 [DBG] Entity Framework Core 8.0.18 initialized 'CleanAriumDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.18' with options: MigrationsAssembly=Persistence 
2025-12-09 01:26:20.849 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(x => x.Email == __email_0)'
2025-12-09 01:26:20.873 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required MaxLength(255), 2], [Property: User.IsBlocked (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.PasswordHash (string) Required, 5], [Property: User.Role (UserRole) Required, 6], [Property: User.Salt (string) Required, 7], [Property: User.UserName (string) Required MaxLength(30), 8] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.Email, u.IsBlocked, u.LastLoginAt, u.PasswordHash, u.Role, u.Salt, u.UserName
            FROM CleanArium.Users AS u
            WHERE u.Email == @__email_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Persistence.Application.CleanAriumDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-09 01:26:20.900 +02:00 [DBG] Creating DbConnection.
2025-12-09 01:26:20.901 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-09 01:26:20.902 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:26:20.909 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:26:20.912 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:26:20.914 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-09 01:26:20.938 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (26ms).
2025-12-09 01:26:20.952 +02:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-12-09 01:26:21.075 +02:00 [INF] Executed DbCommand (128ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-12-09 01:26:21.083 +02:00 [DBG] Context 'CleanAriumDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:26:21.097 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:26:21.101 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 22ms reading results.
2025-12-09 01:26:21.103 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:26:21.107 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (3ms).
2025-12-09 01:26:21.137 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:26:21.147 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:26:21.148 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:26:21.150 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-09 01:26:21.151 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-09 01:26:21.186 +02:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-12-09 01:26:21.269 +02:00 [INF] Executed DbCommand (83ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-12-09 01:26:21.286 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:26:21.294 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 8ms reading results.
2025-12-09 01:26:21.297 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:26:21.299 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (1ms).
2025-12-09 01:26:21.501 +02:00 [DBG] 'CleanAriumDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:26:21.583 +02:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:26:21.601 +02:00 [DBG] Context 'CleanAriumDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:26:21.630 +02:00 [DBG] SaveChanges starting for 'CleanAriumDbContext'.
2025-12-09 01:26:21.639 +02:00 [DBG] DetectChanges starting for 'CleanAriumDbContext'.
2025-12-09 01:26:21.710 +02:00 [DBG] DetectChanges completed for 'CleanAriumDbContext'.
2025-12-09 01:26:22.025 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:26:22.028 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:26:22.035 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:26:22.037 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-09 01:26:22.042 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-12-09 01:26:22.046 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CleanArium].[RefreshTokens] ([ExpiresAt], [IsRevoked], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-12-09 01:26:22.324 +02:00 [INF] Executed DbCommand (280ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CleanArium].[RefreshTokens] ([ExpiresAt], [IsRevoked], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-12-09 01:26:22.359 +02:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-12-09 01:26:22.376 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:26:22.378 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 41ms reading results.
2025-12-09 01:26:22.382 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:26:22.383 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (1ms).
2025-12-09 01:26:22.404 +02:00 [DBG] An entity of type 'RefreshToken' tracked by 'CleanAriumDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:26:22.415 +02:00 [DBG] SaveChanges completed for 'CleanAriumDbContext' with 1 entities written to the database.
2025-12-09 01:26:22.418 +02:00 [INF] Successful login for user: 1 
2025-12-09 01:26:22.424 +02:00 [DBG] An entity of type 'User' tracked by 'CleanAriumDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:26:22.429 +02:00 [DBG] SaveChanges starting for 'CleanAriumDbContext'.
2025-12-09 01:26:22.431 +02:00 [DBG] DetectChanges starting for 'CleanAriumDbContext'.
2025-12-09 01:26:22.434 +02:00 [DBG] DetectChanges completed for 'CleanAriumDbContext'.
2025-12-09 01:26:22.448 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:26:22.451 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:26:22.453 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:26:22.459 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-12-09 01:26:22.462 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-12-09 01:26:22.464 +02:00 [DBG] Executing DbCommand [Parameters=[@p8='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (Size = 30)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [CleanArium].[Users] SET [CreatedAt] = @p0, [Email] = @p1, [IsBlocked] = @p2, [LastLoginAt] = @p3, [PasswordHash] = @p4, [Role] = @p5, [Salt] = @p6, [UserName] = @p7
OUTPUT 1
WHERE [Id] = @p8;
2025-12-09 01:26:22.509 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[@p8='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (Size = 30)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [CleanArium].[Users] SET [CreatedAt] = @p0, [Email] = @p1, [IsBlocked] = @p2, [LastLoginAt] = @p3, [PasswordHash] = @p4, [Role] = @p5, [Salt] = @p6, [UserName] = @p7
OUTPUT 1
WHERE [Id] = @p8;
2025-12-09 01:26:22.515 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:26:22.519 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 6ms reading results.
2025-12-09 01:26:22.525 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:26:22.527 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (2ms).
2025-12-09 01:26:22.533 +02:00 [DBG] An entity of type 'User' tracked by 'CleanAriumDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:26:22.540 +02:00 [DBG] SaveChanges completed for 'CleanAriumDbContext' with 1 entities written to the database.
2025-12-09 01:26:22.554 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-09 01:26:22.561 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-09 01:26:22.563 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-09 01:26:22.564 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-09 01:26:22.567 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-09 01:26:22.569 +02:00 [INF] Executing OkObjectResult, writing value of type 'Application.DTOs.Auth.AuthResponseDto'.
2025-12-09 01:26:22.585 +02:00 [INF] Executed action CleanArium.Controllers.AuthController.Login (CleanArium) in 2185.1295ms
2025-12-09 01:26:22.590 +02:00 [INF] Executed endpoint 'CleanArium.Controllers.AuthController.Login (CleanArium)'
2025-12-09 01:26:22.596 +02:00 [DBG] 'CleanAriumDbContext' disposed.
2025-12-09 01:26:22.602 +02:00 [DBG] Disposing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:26:22.606 +02:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-12-09 01:26:22.610 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7085/api/Auth/login - 200 null application/json; charset=utf-8 2446.7063ms
2025-12-09 01:26:23.273 +02:00 [DBG] Connection id "0HNHMM3S2UBCP" received FIN.
2025-12-09 01:26:23.290 +02:00 [DBG] Connection id "0HNHMM3S2UBCP" is closed. The last processed stream ID was 1.
2025-12-09 01:26:23.291 +02:00 [DBG] The connection queue processing loop for 0HNHMM3S2UBCP completed.
2025-12-09 01:26:23.292 +02:00 [DBG] Connection id "0HNHMM3S2UBCP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 01:26:23.309 +02:00 [DBG] Connection id "0HNHMM3S2UBCP" stopped.
2025-12-09 01:26:37.088 +02:00 [DBG] Connection id "0HNHMM3S2UBCQ" accepted.
2025-12-09 01:26:37.090 +02:00 [DBG] Connection id "0HNHMM3S2UBCQ" started.
2025-12-09 01:26:37.216 +02:00 [DBG] Connection 0HNHMM3S2UBCQ established using the following protocol: "Tls13"
2025-12-09 01:26:37.269 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/api/Admin/system-settings - null null
2025-12-09 01:26:37.332 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Admin/system-settings'
2025-12-09 01:26:37.337 +02:00 [DBG] Endpoint 'CleanArium.Controllers.AdminController.Get (CleanArium)' with route pattern 'api/Admin/system-settings' is valid for the request path '/api/Admin/system-settings'
2025-12-09 01:26:37.342 +02:00 [DBG] Request matched endpoint 'CleanArium.Controllers.AdminController.Get (CleanArium)'
2025-12-09 01:26:37.535 +02:00 [DBG] Successfully validated the token.
2025-12-09 01:26:37.548 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-12-09 01:26:37.574 +02:00 [DBG] Authorization was successful.
2025-12-09 01:26:37.579 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-09 01:26:37.580 +02:00 [INF] Executing endpoint 'CleanArium.Controllers.AdminController.Get (CleanArium)'
2025-12-09 01:26:37.596 +02:00 [INF] Route matched with {action = "Get", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller CleanArium.Controllers.AdminController (CleanArium).
2025-12-09 01:26:37.599 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-09 01:26:37.602 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-09 01:26:37.604 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-09 01:26:37.609 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-09 01:26:37.612 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-09 01:26:37.614 +02:00 [DBG] Executing controller factory for controller CleanArium.Controllers.AdminController (CleanArium)
2025-12-09 01:26:37.619 +02:00 [DBG] Executed controller factory for controller CleanArium.Controllers.AdminController (CleanArium)
2025-12-09 01:26:37.636 +02:00 [DBG] Entity Framework Core 8.0.18 initialized 'CleanAriumDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.18' with options: MigrationsAssembly=Persistence 
2025-12-09 01:26:37.646 +02:00 [DBG] Compiling query expression: 
'DbSet<SystemSettings>()
    .FirstOrDefault()'
2025-12-09 01:26:37.651 +02:00 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-12-09 01:26:37.665 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<SystemSettings>(
    asyncEnumerable: new SingleQueryingEnumerable<SystemSettings>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: SystemSettings.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: SystemSettings.MaxAlarmRulesPerDevice (int) Required, 1], [Property: SystemSettings.MaxAquariumsPerUser (int) Required, 2], [Property: SystemSettings.MaxDevicesPerAquarium (int) Required, 3], [Property: SystemSettings.MaxScheduledCommandsPerDevice (int) Required, 4] }
            SELECT TOP(1) s.Id, s.MaxAlarmRulesPerDevice, s.MaxAquariumsPerUser, s.MaxDevicesPerAquarium, s.MaxScheduledCommandsPerDevice
            FROM CleanArium.SystemSettings AS s), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, SystemSettings>, 
        Persistence.Application.CleanAriumDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-09 01:26:37.669 +02:00 [DBG] Creating DbConnection.
2025-12-09 01:26:37.671 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-09 01:26:37.676 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:26:37.678 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:26:37.682 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:26:37.684 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-09 01:26:37.687 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-12-09 01:26:37.697 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[MaxAlarmRulesPerDevice], [s].[MaxAquariumsPerUser], [s].[MaxDevicesPerAquarium], [s].[MaxScheduledCommandsPerDevice]
FROM [CleanArium].[SystemSettings] AS [s]
2025-12-09 01:26:37.713 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[MaxAlarmRulesPerDevice], [s].[MaxAquariumsPerUser], [s].[MaxDevicesPerAquarium], [s].[MaxScheduledCommandsPerDevice]
FROM [CleanArium].[SystemSettings] AS [s]
2025-12-09 01:26:37.720 +02:00 [DBG] Context 'CleanAriumDbContext' started tracking 'SystemSettings' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:26:37.751 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:26:37.753 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 37ms reading results.
2025-12-09 01:26:37.757 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:26:37.760 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (3ms).
2025-12-09 01:26:37.764 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-09 01:26:37.767 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-09 01:26:37.768 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-09 01:26:37.769 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-09 01:26:37.771 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-09 01:26:37.774 +02:00 [INF] Executing OkObjectResult, writing value of type 'Application.DTOs.SystemSettings.SystemSettingsDto'.
2025-12-09 01:26:37.782 +02:00 [INF] Executed action CleanArium.Controllers.AdminController.Get (CleanArium) in 167.7885ms
2025-12-09 01:26:37.785 +02:00 [INF] Executed endpoint 'CleanArium.Controllers.AdminController.Get (CleanArium)'
2025-12-09 01:26:37.786 +02:00 [DBG] 'CleanAriumDbContext' disposed.
2025-12-09 01:26:37.800 +02:00 [DBG] Disposing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:26:37.802 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-09 01:26:37.819 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/api/Admin/system-settings - 200 null application/json; charset=utf-8 550.9093ms
2025-12-09 01:26:38.298 +02:00 [DBG] Connection id "0HNHMM3S2UBCQ" received FIN.
2025-12-09 01:26:38.325 +02:00 [DBG] Connection id "0HNHMM3S2UBCQ" is closed. The last processed stream ID was 1.
2025-12-09 01:26:38.325 +02:00 [DBG] The connection queue processing loop for 0HNHMM3S2UBCQ completed.
2025-12-09 01:26:38.334 +02:00 [DBG] Connection id "0HNHMM3S2UBCQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 01:26:38.352 +02:00 [DBG] Connection id "0HNHMM3S2UBCQ" stopped.
2025-12-09 01:27:24.457 +02:00 [DBG] Connection id "0HNHMM3S2UBCR" accepted.
2025-12-09 01:27:24.475 +02:00 [DBG] Connection id "0HNHMM3S2UBCR" started.
2025-12-09 01:27:24.486 +02:00 [DBG] Connection 0HNHMM3S2UBCR established using the following protocol: "Tls13"
2025-12-09 01:27:24.496 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7085/api/Admin/update-system-settings - application/json 129
2025-12-09 01:27:24.500 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Admin/update-system-settings'
2025-12-09 01:27:24.502 +02:00 [DBG] Endpoint 'CleanArium.Controllers.AdminController.Update (CleanArium)' with route pattern 'api/Admin/update-system-settings' is valid for the request path '/api/Admin/update-system-settings'
2025-12-09 01:27:24.504 +02:00 [DBG] Request matched endpoint 'CleanArium.Controllers.AdminController.Update (CleanArium)'
2025-12-09 01:27:24.510 +02:00 [DBG] Successfully validated the token.
2025-12-09 01:27:24.511 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-12-09 01:27:24.516 +02:00 [DBG] Authorization was successful.
2025-12-09 01:27:24.517 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-09 01:27:24.519 +02:00 [INF] Executing endpoint 'CleanArium.Controllers.AdminController.Update (CleanArium)'
2025-12-09 01:27:24.530 +02:00 [INF] Route matched with {action = "Update", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(CleanArium.Contracts.SystemSettings.UpdateSystemSettingsRequest) on controller CleanArium.Controllers.AdminController (CleanArium).
2025-12-09 01:27:24.533 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-09 01:27:24.535 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-09 01:27:24.537 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-09 01:27:24.543 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-09 01:27:24.546 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-09 01:27:24.548 +02:00 [DBG] Executing controller factory for controller CleanArium.Controllers.AdminController (CleanArium)
2025-12-09 01:27:24.549 +02:00 [DBG] Executed controller factory for controller CleanArium.Controllers.AdminController (CleanArium)
2025-12-09 01:27:24.552 +02:00 [DBG] Attempting to bind parameter 'request' of type 'CleanArium.Contracts.SystemSettings.UpdateSystemSettingsRequest' ...
2025-12-09 01:27:24.554 +02:00 [DBG] Attempting to bind parameter 'request' of type 'CleanArium.Contracts.SystemSettings.UpdateSystemSettingsRequest' using the name '' in request data ...
2025-12-09 01:27:24.558 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-12-09 01:27:24.562 +02:00 [DBG] Connection id "0HNHMM3S2UBCR", Request id "0HNHMM3S2UBCR:00000001": started reading request body.
2025-12-09 01:27:24.564 +02:00 [DBG] Connection id "0HNHMM3S2UBCR", Request id "0HNHMM3S2UBCR:00000001": done reading request body.
2025-12-09 01:27:24.569 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'CleanArium.Contracts.SystemSettings.UpdateSystemSettingsRequest'
2025-12-09 01:27:24.570 +02:00 [DBG] Done attempting to bind parameter 'request' of type 'CleanArium.Contracts.SystemSettings.UpdateSystemSettingsRequest'.
2025-12-09 01:27:24.574 +02:00 [DBG] Done attempting to bind parameter 'request' of type 'CleanArium.Contracts.SystemSettings.UpdateSystemSettingsRequest'.
2025-12-09 01:27:24.576 +02:00 [DBG] Attempting to validate the bound parameter 'request' of type 'CleanArium.Contracts.SystemSettings.UpdateSystemSettingsRequest' ...
2025-12-09 01:27:24.581 +02:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'CleanArium.Contracts.SystemSettings.UpdateSystemSettingsRequest'.
2025-12-09 01:27:24.616 +02:00 [DBG] Entity Framework Core 8.0.18 initialized 'CleanAriumDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.18' with options: MigrationsAssembly=Persistence 
2025-12-09 01:27:24.619 +02:00 [DBG] Creating DbConnection.
2025-12-09 01:27:24.620 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-09 01:27:24.623 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:27:24.626 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:27:24.628 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:27:24.629 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-09 01:27:24.630 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-09 01:27:24.632 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[MaxAlarmRulesPerDevice], [s].[MaxAquariumsPerUser], [s].[MaxDevicesPerAquarium], [s].[MaxScheduledCommandsPerDevice]
FROM [CleanArium].[SystemSettings] AS [s]
2025-12-09 01:27:24.641 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[MaxAlarmRulesPerDevice], [s].[MaxAquariumsPerUser], [s].[MaxDevicesPerAquarium], [s].[MaxScheduledCommandsPerDevice]
FROM [CleanArium].[SystemSettings] AS [s]
2025-12-09 01:27:24.647 +02:00 [DBG] Context 'CleanAriumDbContext' started tracking 'SystemSettings' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:27:24.649 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:27:24.650 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 3ms reading results.
2025-12-09 01:27:24.652 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:27:24.654 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (1ms).
2025-12-09 01:27:24.662 +02:00 [DBG] An entity of type 'SystemSettings' tracked by 'CleanAriumDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:27:24.664 +02:00 [DBG] SaveChanges starting for 'CleanAriumDbContext'.
2025-12-09 01:27:24.665 +02:00 [DBG] DetectChanges starting for 'CleanAriumDbContext'.
2025-12-09 01:27:24.668 +02:00 [DBG] DetectChanges completed for 'CleanAriumDbContext'.
2025-12-09 01:27:24.679 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:27:24.684 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:27:24.686 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:27:24.687 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-09 01:27:24.692 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-12-09 01:27:24.694 +02:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int64), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [CleanArium].[SystemSettings] SET [MaxAlarmRulesPerDevice] = @p0, [MaxAquariumsPerUser] = @p1, [MaxDevicesPerAquarium] = @p2, [MaxScheduledCommandsPerDevice] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-12-09 01:27:24.715 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@p4='?' (DbType = Int64), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [CleanArium].[SystemSettings] SET [MaxAlarmRulesPerDevice] = @p0, [MaxAquariumsPerUser] = @p1, [MaxDevicesPerAquarium] = @p2, [MaxScheduledCommandsPerDevice] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-12-09 01:27:24.718 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:27:24.719 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 1ms reading results.
2025-12-09 01:27:24.721 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:27:24.727 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (5ms).
2025-12-09 01:27:24.730 +02:00 [DBG] An entity of type 'SystemSettings' tracked by 'CleanAriumDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:27:24.731 +02:00 [DBG] SaveChanges completed for 'CleanAriumDbContext' with 1 entities written to the database.
2025-12-09 01:27:24.735 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-09 01:27:24.743 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-09 01:27:24.744 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-09 01:27:24.745 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-09 01:27:24.746 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-12-09 01:27:24.747 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-12-09 01:27:24.749 +02:00 [INF] Executed action CleanArium.Controllers.AdminController.Update (CleanArium) in 201.285ms
2025-12-09 01:27:24.751 +02:00 [INF] Executed endpoint 'CleanArium.Controllers.AdminController.Update (CleanArium)'
2025-12-09 01:27:24.752 +02:00 [DBG] 'CleanAriumDbContext' disposed.
2025-12-09 01:27:24.753 +02:00 [DBG] Disposing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:27:24.761 +02:00 [DBG] Disposed connection to database '' on server '' (7ms).
2025-12-09 01:27:24.763 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7085/api/Admin/update-system-settings - 200 null text/plain; charset=utf-8 266.5738ms
2025-12-09 01:27:30.006 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/api/Admin/system-settings - null null
2025-12-09 01:27:30.009 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Admin/system-settings'
2025-12-09 01:27:30.011 +02:00 [DBG] Endpoint 'CleanArium.Controllers.AdminController.Get (CleanArium)' with route pattern 'api/Admin/system-settings' is valid for the request path '/api/Admin/system-settings'
2025-12-09 01:27:30.012 +02:00 [DBG] Request matched endpoint 'CleanArium.Controllers.AdminController.Get (CleanArium)'
2025-12-09 01:27:30.015 +02:00 [DBG] Successfully validated the token.
2025-12-09 01:27:30.017 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-12-09 01:27:30.021 +02:00 [DBG] Authorization was successful.
2025-12-09 01:27:30.026 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-09 01:27:30.028 +02:00 [INF] Executing endpoint 'CleanArium.Controllers.AdminController.Get (CleanArium)'
2025-12-09 01:27:30.031 +02:00 [INF] Route matched with {action = "Get", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller CleanArium.Controllers.AdminController (CleanArium).
2025-12-09 01:27:30.033 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-09 01:27:30.035 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-09 01:27:30.037 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-09 01:27:30.041 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-09 01:27:30.045 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-09 01:27:30.047 +02:00 [DBG] Executing controller factory for controller CleanArium.Controllers.AdminController (CleanArium)
2025-12-09 01:27:30.049 +02:00 [DBG] Executed controller factory for controller CleanArium.Controllers.AdminController (CleanArium)
2025-12-09 01:27:30.053 +02:00 [DBG] Entity Framework Core 8.0.18 initialized 'CleanAriumDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.18' with options: MigrationsAssembly=Persistence 
2025-12-09 01:27:30.058 +02:00 [DBG] Creating DbConnection.
2025-12-09 01:27:30.059 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-09 01:27:30.061 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:27:30.063 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:27:30.064 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:27:30.065 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-09 01:27:30.067 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-09 01:27:30.068 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[MaxAlarmRulesPerDevice], [s].[MaxAquariumsPerUser], [s].[MaxDevicesPerAquarium], [s].[MaxScheduledCommandsPerDevice]
FROM [CleanArium].[SystemSettings] AS [s]
2025-12-09 01:27:30.075 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[MaxAlarmRulesPerDevice], [s].[MaxAquariumsPerUser], [s].[MaxDevicesPerAquarium], [s].[MaxScheduledCommandsPerDevice]
FROM [CleanArium].[SystemSettings] AS [s]
2025-12-09 01:27:30.079 +02:00 [DBG] Context 'CleanAriumDbContext' started tracking 'SystemSettings' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:27:30.080 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:27:30.082 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 2ms reading results.
2025-12-09 01:27:30.083 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:27:30.084 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (1ms).
2025-12-09 01:27:30.086 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-09 01:27:30.092 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-09 01:27:30.094 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-09 01:27:30.095 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-09 01:27:30.096 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-09 01:27:30.097 +02:00 [INF] Executing OkObjectResult, writing value of type 'Application.DTOs.SystemSettings.SystemSettingsDto'.
2025-12-09 01:27:30.099 +02:00 [INF] Executed action CleanArium.Controllers.AdminController.Get (CleanArium) in 51.8515ms
2025-12-09 01:27:30.117 +02:00 [INF] Executed endpoint 'CleanArium.Controllers.AdminController.Get (CleanArium)'
2025-12-09 01:27:30.119 +02:00 [DBG] 'CleanAriumDbContext' disposed.
2025-12-09 01:27:30.131 +02:00 [DBG] Disposing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:27:30.135 +02:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-12-09 01:27:30.136 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/api/Admin/system-settings - 200 null application/json; charset=utf-8 130.6613ms
2025-12-09 01:28:06.810 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/api/Admin/logs - null null
2025-12-09 01:28:06.818 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Admin/logs'
2025-12-09 01:28:06.827 +02:00 [DBG] Endpoint 'CleanArium.Controllers.AdminController.GetLogs (CleanArium)' with route pattern 'api/Admin/logs' is valid for the request path '/api/Admin/logs'
2025-12-09 01:28:06.830 +02:00 [DBG] Request matched endpoint 'CleanArium.Controllers.AdminController.GetLogs (CleanArium)'
2025-12-09 01:28:06.832 +02:00 [DBG] Successfully validated the token.
2025-12-09 01:28:06.843 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-12-09 01:28:06.846 +02:00 [DBG] Authorization was successful.
2025-12-09 01:28:06.848 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-09 01:28:06.849 +02:00 [INF] Executing endpoint 'CleanArium.Controllers.AdminController.GetLogs (CleanArium)'
2025-12-09 01:28:06.854 +02:00 [INF] Route matched with {action = "GetLogs", controller = "Admin"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetLogs(Microsoft.AspNetCore.Hosting.IWebHostEnvironment) on controller CleanArium.Controllers.AdminController (CleanArium).
2025-12-09 01:28:06.862 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-09 01:28:06.865 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-09 01:28:06.867 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-09 01:28:06.869 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-09 01:28:06.871 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-09 01:28:06.874 +02:00 [DBG] Executing controller factory for controller CleanArium.Controllers.AdminController (CleanArium)
2025-12-09 01:28:06.877 +02:00 [DBG] Executed controller factory for controller CleanArium.Controllers.AdminController (CleanArium)
2025-12-09 01:28:06.880 +02:00 [DBG] Attempting to bind parameter 'env' of type 'Microsoft.AspNetCore.Hosting.IWebHostEnvironment' ...
2025-12-09 01:28:06.882 +02:00 [DBG] Done attempting to bind parameter 'env' of type 'Microsoft.AspNetCore.Hosting.IWebHostEnvironment'.
2025-12-09 01:28:06.884 +02:00 [DBG] Attempting to validate the bound parameter 'env' of type 'Microsoft.AspNetCore.Hosting.IWebHostEnvironment' ...
2025-12-09 01:28:06.890 +02:00 [DBG] Done attempting to validate the bound parameter 'env' of type 'Microsoft.AspNetCore.Hosting.IWebHostEnvironment'.
2025-12-09 01:28:06.893 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-09 01:28:06.895 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-09 01:28:06.896 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-09 01:28:06.897 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-09 01:28:06.898 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-12-09 01:28:06.899 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2025-12-09 01:28:06.901 +02:00 [INF] Executed action CleanArium.Controllers.AdminController.GetLogs (CleanArium) in 26.5018ms
2025-12-09 01:28:06.912 +02:00 [INF] Executed endpoint 'CleanArium.Controllers.AdminController.GetLogs (CleanArium)'
2025-12-09 01:28:06.914 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/api/Admin/logs - 404 null text/plain; charset=utf-8 103.9267ms
2025-12-09 01:28:13.452 +02:00 [DBG] Connection id "0HNHMM3S2UBCR" received FIN.
2025-12-09 01:28:13.459 +02:00 [DBG] Connection id "0HNHMM3S2UBCR" is closed. The last processed stream ID was 5.
2025-12-09 01:28:13.460 +02:00 [DBG] The connection queue processing loop for 0HNHMM3S2UBCR completed.
2025-12-09 01:28:13.461 +02:00 [DBG] Connection id "0HNHMM3S2UBCR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 01:28:13.466 +02:00 [DBG] Connection id "0HNHMM3S2UBCR" stopped.
2025-12-09 01:30:28.648 +02:00 [INF] Application starting
2025-12-09 01:30:32.349 +02:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-12-09 01:30:37.050 +02:00 [DBG] Entity Framework Core 8.0.18 initialized 'CleanAriumDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.18' with options: MigrationsAssembly=Persistence 
2025-12-09 01:30:37.079 +02:00 [DBG] Creating DbConnection.
2025-12-09 01:30:38.118 +02:00 [DBG] Created DbConnection. (1021ms).
2025-12-09 01:30:38.241 +02:00 [DBG] Migrating using database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:38.284 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:39.192 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:39.208 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-12-09 01:30:39.377 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (170ms).
2025-12-09 01:30:39.382 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (181ms).
2025-12-09 01:30:39.396 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-09 01:30:39.453 +02:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-09 01:30:39.467 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:39.499 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (26ms).
2025-12-09 01:30:39.525 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-12-09 01:30:39.564 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (40ms).
2025-12-09 01:30:39.623 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (99ms).
2025-12-09 01:30:39.626 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:39.629 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:39.632 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 01:30:39.668 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 01:30:39.672 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:39.675 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (2ms).
2025-12-09 01:30:39.678 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:39.681 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:39.682 +02:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-12-09 01:30:39.684 +02:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2025-12-09 01:30:39.685 +02:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (2ms).
2025-12-09 01:30:39.687 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-09 01:30:39.693 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-09 01:30:39.696 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:39.698 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (1ms).
2025-12-09 01:30:39.700 +02:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-12-09 01:30:39.702 +02:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-12-09 01:30:39.703 +02:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-12-09 01:30:39.706 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:39.708 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:39.711 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 01:30:39.715 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 01:30:39.718 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:39.720 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (1ms).
2025-12-09 01:30:39.753 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:39.760 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:39.762 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:30:39.764 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-09 01:30:39.766 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-09 01:30:39.769 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-09 01:30:39.794 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-09 01:30:39.800 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:39.803 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 4ms reading results.
2025-12-09 01:30:39.860 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:39.863 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (2ms).
2025-12-09 01:30:39.888 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-12-09 01:30:39.898 +02:00 [INF] Checking if admin user exists...
2025-12-09 01:30:40.047 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => (int)u.Role == 3)'
2025-12-09 01:30:40.543 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required MaxLength(255), 2], [Property: User.IsBlocked (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.PasswordHash (string) Required, 5], [Property: User.Role (UserRole) Required, 6], [Property: User.Salt (string) Required, 7], [Property: User.UserName (string) Required MaxLength(30), 8] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.Email, u.IsBlocked, u.LastLoginAt, u.PasswordHash, u.Role, u.Salt, u.UserName
            FROM CleanArium.Users AS u
            WHERE u.Role == 3), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Persistence.Application.CleanAriumDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-09 01:30:40.639 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:40.720 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:40.726 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:30:40.728 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-09 01:30:40.729 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-09 01:30:40.732 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Role] = 3
2025-12-09 01:30:40.787 +02:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Role] = 3
2025-12-09 01:30:40.892 +02:00 [DBG] Context 'CleanAriumDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:30:40.994 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:41.005 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 214ms reading results.
2025-12-09 01:30:41.054 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:41.060 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (5ms).
2025-12-09 01:30:41.064 +02:00 [INF] Admin already exists. Skipping seeding.
2025-12-09 01:30:41.069 +02:00 [DBG] 'CleanAriumDbContext' disposed.
2025-12-09 01:30:41.075 +02:00 [DBG] Disposing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:41.081 +02:00 [DBG] Disposed connection to database '' on server '' (6ms).
2025-12-09 01:30:41.274 +02:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-12-09 01:30:41.462 +02:00 [DBG] Hosting starting
2025-12-09 01:30:41.516 +02:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-09 01:30:41.602 +02:00 [INF] Refresh token cleanup service started.
2025-12-09 01:30:41.609 +02:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-2bf296c1-e960-45a6-9b2e-1b3a7a4f6df5.xml'.
2025-12-09 01:30:41.678 +02:00 [DBG] Reading data from file 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys\key-39215358-ff03-452f-97d9-71001816138e.xml'.
2025-12-09 01:30:41.678 +02:00 [DBG] Entity Framework Core 8.0.18 initialized 'CleanAriumDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.18' with options: MigrationsAssembly=Persistence 
2025-12-09 01:30:41.728 +02:00 [DBG] Found key {2bf296c1-e960-45a6-9b2e-1b3a7a4f6df5}.
2025-12-09 01:30:41.791 +02:00 [DBG] Compiling query expression: 
'DbSet<RefreshToken>()
    .Where(x => x.ExpiresAt < DateTime.UtcNow)'
2025-12-09 01:30:41.833 +02:00 [DBG] Found key {39215358-ff03-452f-97d9-71001816138e}.
2025-12-09 01:30:41.850 +02:00 [DBG] Considering key {2bf296c1-e960-45a6-9b2e-1b3a7a4f6df5} with expiration date 2026-01-29 22:22:30Z as default key.
2025-12-09 01:30:41.854 +02:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<RefreshToken>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: RefreshToken.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: RefreshToken.ExpiresAt (DateTime) Required, 1], [Property: RefreshToken.IsRevoked (bool) Required, 2], [Property: RefreshToken.Token (string) Required, 3], [Property: RefreshToken.UserId (long) Required FK Index, 4] }
        SELECT r.Id, r.ExpiresAt, r.IsRevoked, r.Token, r.UserId
        FROM CleanArium.RefreshTokens AS r
        WHERE r.ExpiresAt < GETUTCDATE()), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, RefreshToken>, 
    Persistence.Application.CleanAriumDbContext, 
    False, 
    False, 
    True
)'
2025-12-09 01:30:41.873 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-09 01:30:41.903 +02:00 [DBG] Creating DbConnection.
2025-12-09 01:30:41.916 +02:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-12-09 01:30:41.917 +02:00 [DBG] Created DbConnection. (13ms).
2025-12-09 01:30:41.920 +02:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-12-09 01:30:41.931 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:41.949 +02:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-12-09 01:30:41.956 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:41.982 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:30:41.982 +02:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-12-09 01:30:41.984 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-09 01:30:41.991 +02:00 [DBG] Using key {2bf296c1-e960-45a6-9b2e-1b3a7a4f6df5} as the default key.
2025-12-09 01:30:41.994 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-12-09 01:30:41.997 +02:00 [DBG] Key ring with default key {2bf296c1-e960-45a6-9b2e-1b3a7a4f6df5} was loaded during application startup.
2025-12-09 01:30:41.997 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ExpiresAt], [r].[IsRevoked], [r].[Token], [r].[UserId]
FROM [CleanArium].[RefreshTokens] AS [r]
WHERE [r].[ExpiresAt] < GETUTCDATE()
2025-12-09 01:30:42.029 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ExpiresAt], [r].[IsRevoked], [r].[Token], [r].[UserId]
FROM [CleanArium].[RefreshTokens] AS [r]
WHERE [r].[ExpiresAt] < GETUTCDATE()
2025-12-09 01:30:42.046 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:42.052 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 7ms reading results.
2025-12-09 01:30:42.054 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:42.080 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (26ms).
2025-12-09 01:30:42.088 +02:00 [DBG] 'CleanAriumDbContext' disposed.
2025-12-09 01:30:42.095 +02:00 [DBG] Disposing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:30:42.099 +02:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-12-09 01:30:42.563 +02:00 [INF] Now listening on: https://localhost:7085
2025-12-09 01:30:42.565 +02:00 [INF] Now listening on: http://localhost:5250
2025-12-09 01:30:42.568 +02:00 [DBG] Loaded hosting startup assembly CleanArium
2025-12-09 01:30:42.570 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-12-09 01:30:42.575 +02:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-12-09 01:30:42.578 +02:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-12-09 01:30:42.912 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-09 01:30:42.915 +02:00 [INF] Hosting environment: Development
2025-12-09 01:30:42.917 +02:00 [INF] Content root path: C:\Users\User\source\repos\CleanArium\CleanArium
2025-12-09 01:30:42.920 +02:00 [DBG] Hosting started
2025-12-09 01:30:43.025 +02:00 [DBG] Connection id "0HNHMM773JLUT" received FIN.
2025-12-09 01:30:43.028 +02:00 [DBG] Connection id "0HNHMM773JLUU" accepted.
2025-12-09 01:30:43.028 +02:00 [DBG] Connection id "0HNHMM773JLUT" accepted.
2025-12-09 01:30:43.104 +02:00 [DBG] Connection id "0HNHMM773JLUU" received FIN.
2025-12-09 01:30:43.112 +02:00 [DBG] Connection id "0HNHMM773JLUU" started.
2025-12-09 01:30:43.114 +02:00 [DBG] Connection id "0HNHMM773JLUT" started.
2025-12-09 01:30:43.154 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-12-09 01:30:43.154 +02:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-12-09 01:30:43.409 +02:00 [DBG] Connection id "0HNHMM773JLUT" stopped.
2025-12-09 01:30:43.436 +02:00 [DBG] Connection id "0HNHMM773JLUU" stopped.
2025-12-09 01:30:43.459 +02:00 [DBG] Connection id "0HNHMM773JLUU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 01:30:43.459 +02:00 [DBG] Connection id "0HNHMM773JLUT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 01:30:44.399 +02:00 [DBG] Connection id "0HNHMM773JLUV" accepted.
2025-12-09 01:30:44.549 +02:00 [DBG] Connection id "0HNHMM773JLUV" started.
2025-12-09 01:30:44.711 +02:00 [DBG] Connection 0HNHMM773JLUV established using the following protocol: "Tls13"
2025-12-09 01:30:45.726 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/swagger/index.html - null null
2025-12-09 01:30:46.795 +02:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-12-09 01:30:47.043 +02:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-12-09 01:30:47.728 +02:00 [DBG] Request did not match any endpoints
2025-12-09 01:30:47.950 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-09 01:30:48.136 +02:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-12-09 01:30:48.148 +02:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-12-09 01:30:48.278 +02:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-12-09 01:30:48.298 +02:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-12-09 01:30:48.385 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/_framework/aspnetcore-browser-refresh.js - null null
2025-12-09 01:30:48.386 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/swagger/index.html - 200 null text/html;charset=utf-8 2673.8533ms
2025-12-09 01:30:48.392 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/_vs/browserLink - null null
2025-12-09 01:30:48.416 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 30.981ms
2025-12-09 01:30:48.667 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/_vs/browserLink - 200 null text/javascript; charset=UTF-8 275.2625ms
2025-12-09 01:30:49.031 +02:00 [DBG] Connection id "0HNHMM773JLUV" received FIN.
2025-12-09 01:30:49.036 +02:00 [DBG] Connection id "0HNHMM773JLUV" is closed. The last processed stream ID was 5.
2025-12-09 01:30:49.040 +02:00 [DBG] The connection queue processing loop for 0HNHMM773JLUV completed.
2025-12-09 01:30:49.042 +02:00 [DBG] Connection id "0HNHMM773JLUV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 01:30:49.052 +02:00 [DBG] Connection id "0HNHMM773JLUV" stopped.
2025-12-09 01:30:50.492 +02:00 [DBG] Connection id "0HNHMM773JLV0" accepted.
2025-12-09 01:30:50.540 +02:00 [DBG] Connection id "0HNHMM773JLV0" started.
2025-12-09 01:30:50.597 +02:00 [DBG] Connection 0HNHMM773JLV0 established using the following protocol: "Tls13"
2025-12-09 01:30:50.612 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/swagger/v1/swagger.json - null null
2025-12-09 01:30:50.616 +02:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-12-09 01:30:50.618 +02:00 [DBG] Request did not match any endpoints
2025-12-09 01:30:50.627 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-09 01:30:50.702 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 89.6446ms
2025-12-09 01:30:59.044 +02:00 [DBG] Connection id "0HNHMM773JLV0" received FIN.
2025-12-09 01:30:59.061 +02:00 [DBG] Connection id "0HNHMM773JLV0" is closed. The last processed stream ID was 1.
2025-12-09 01:30:59.063 +02:00 [DBG] The connection queue processing loop for 0HNHMM773JLV0 completed.
2025-12-09 01:30:59.070 +02:00 [DBG] Connection id "0HNHMM773JLV0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 01:30:59.082 +02:00 [DBG] Connection id "0HNHMM773JLV0" stopped.
2025-12-09 01:31:22.365 +02:00 [DBG] Connection id "0HNHMM773JLV1" accepted.
2025-12-09 01:31:22.412 +02:00 [DBG] Connection id "0HNHMM773JLV1" started.
2025-12-09 01:31:22.419 +02:00 [DBG] Connection 0HNHMM773JLV1 established using the following protocol: "Tls13"
2025-12-09 01:31:22.432 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7085/api/Auth/login - application/json 61
2025-12-09 01:31:22.450 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Auth/login'
2025-12-09 01:31:22.460 +02:00 [DBG] Endpoint 'CleanArium.Controllers.AuthController.Login (CleanArium)' with route pattern 'api/Auth/login' is valid for the request path '/api/Auth/login'
2025-12-09 01:31:22.464 +02:00 [DBG] Request matched endpoint 'CleanArium.Controllers.AuthController.Login (CleanArium)'
2025-12-09 01:31:22.470 +02:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-12-09 01:31:22.477 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-09 01:31:22.479 +02:00 [INF] Executing endpoint 'CleanArium.Controllers.AuthController.Login (CleanArium)'
2025-12-09 01:31:22.570 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(CleanArium.Contracts.Auth.LoginRequest) on controller CleanArium.Controllers.AuthController (CleanArium).
2025-12-09 01:31:22.581 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-09 01:31:22.584 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-09 01:31:22.586 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-09 01:31:22.593 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-09 01:31:22.595 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-09 01:31:22.601 +02:00 [DBG] Executing controller factory for controller CleanArium.Controllers.AuthController (CleanArium)
2025-12-09 01:31:22.611 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-09 01:31:22.613 +02:00 [DBG] Executed controller factory for controller CleanArium.Controllers.AuthController (CleanArium)
2025-12-09 01:31:22.659 +02:00 [DBG] Attempting to bind parameter 'request' of type 'CleanArium.Contracts.Auth.LoginRequest' ...
2025-12-09 01:31:22.669 +02:00 [DBG] Attempting to bind parameter 'request' of type 'CleanArium.Contracts.Auth.LoginRequest' using the name '' in request data ...
2025-12-09 01:31:22.679 +02:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-12-09 01:31:22.698 +02:00 [DBG] Connection id "0HNHMM773JLV1", Request id "0HNHMM773JLV1:00000001": started reading request body.
2025-12-09 01:31:22.700 +02:00 [DBG] Connection id "0HNHMM773JLV1", Request id "0HNHMM773JLV1:00000001": done reading request body.
2025-12-09 01:31:22.732 +02:00 [DBG] JSON input formatter succeeded, deserializing to type 'CleanArium.Contracts.Auth.LoginRequest'
2025-12-09 01:31:22.746 +02:00 [DBG] Done attempting to bind parameter 'request' of type 'CleanArium.Contracts.Auth.LoginRequest'.
2025-12-09 01:31:22.748 +02:00 [DBG] Done attempting to bind parameter 'request' of type 'CleanArium.Contracts.Auth.LoginRequest'.
2025-12-09 01:31:22.749 +02:00 [DBG] Attempting to validate the bound parameter 'request' of type 'CleanArium.Contracts.Auth.LoginRequest' ...
2025-12-09 01:31:22.773 +02:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'CleanArium.Contracts.Auth.LoginRequest'.
2025-12-09 01:31:22.931 +02:00 [DBG] Entity Framework Core 8.0.18 initialized 'CleanAriumDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.18' with options: MigrationsAssembly=Persistence 
2025-12-09 01:31:22.939 +02:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(x => x.Email == __email_0)'
2025-12-09 01:31:22.953 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: User.Email (string) Required MaxLength(255), 2], [Property: User.IsBlocked (bool) Required, 3], [Property: User.LastLoginAt (DateTime?), 4], [Property: User.PasswordHash (string) Required, 5], [Property: User.Role (UserRole) Required, 6], [Property: User.Salt (string) Required, 7], [Property: User.UserName (string) Required MaxLength(30), 8] }
            SELECT TOP(1) u.Id, u.CreatedAt, u.Email, u.IsBlocked, u.LastLoginAt, u.PasswordHash, u.Role, u.Salt, u.UserName
            FROM CleanArium.Users AS u
            WHERE u.Email == @__email_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Persistence.Application.CleanAriumDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-09 01:31:22.965 +02:00 [DBG] Creating DbConnection.
2025-12-09 01:31:22.966 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-09 01:31:22.967 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:22.969 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:22.975 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:31:22.976 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-09 01:31:22.984 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-12-09 01:31:22.992 +02:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-12-09 01:31:23.084 +02:00 [INF] Executed DbCommand (98ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-12-09 01:31:23.096 +02:00 [DBG] Context 'CleanAriumDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:31:23.098 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:23.100 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 5ms reading results.
2025-12-09 01:31:23.103 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:23.109 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (6ms).
2025-12-09 01:31:23.133 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:23.134 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:23.137 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:31:23.142 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-12-09 01:31:23.145 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-12-09 01:31:23.147 +02:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-12-09 01:31:23.160 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__email_0='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[IsBlocked], [u].[LastLoginAt], [u].[PasswordHash], [u].[Role], [u].[Salt], [u].[UserName]
FROM [CleanArium].[Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-12-09 01:31:23.165 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:23.166 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 2ms reading results.
2025-12-09 01:31:23.168 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:23.170 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (1ms).
2025-12-09 01:31:23.277 +02:00 [DBG] 'CleanAriumDbContext' generated a temporary value for the property 'RefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:31:23.324 +02:00 [DBG] The navigation 'RefreshToken.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:31:23.336 +02:00 [DBG] Context 'CleanAriumDbContext' started tracking 'RefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:31:23.344 +02:00 [DBG] SaveChanges starting for 'CleanAriumDbContext'.
2025-12-09 01:31:23.351 +02:00 [DBG] DetectChanges starting for 'CleanAriumDbContext'.
2025-12-09 01:31:23.411 +02:00 [DBG] DetectChanges completed for 'CleanAriumDbContext'.
2025-12-09 01:31:23.582 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:23.584 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:23.591 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:31:23.593 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-09 01:31:23.596 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-12-09 01:31:23.598 +02:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CleanArium].[RefreshTokens] ([ExpiresAt], [IsRevoked], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-12-09 01:31:23.617 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CleanArium].[RefreshTokens] ([ExpiresAt], [IsRevoked], [Token], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-12-09 01:31:23.646 +02:00 [DBG] The foreign key property 'RefreshToken.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-12-09 01:31:23.662 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:23.665 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 45ms reading results.
2025-12-09 01:31:23.670 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:23.674 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (3ms).
2025-12-09 01:31:23.694 +02:00 [DBG] An entity of type 'RefreshToken' tracked by 'CleanAriumDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:31:23.698 +02:00 [DBG] SaveChanges completed for 'CleanAriumDbContext' with 1 entities written to the database.
2025-12-09 01:31:23.701 +02:00 [INF] Successful login for user: 1 
2025-12-09 01:31:23.705 +02:00 [DBG] An entity of type 'User' tracked by 'CleanAriumDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:31:23.709 +02:00 [DBG] SaveChanges starting for 'CleanAriumDbContext'.
2025-12-09 01:31:23.710 +02:00 [DBG] DetectChanges starting for 'CleanAriumDbContext'.
2025-12-09 01:31:23.713 +02:00 [DBG] DetectChanges completed for 'CleanAriumDbContext'.
2025-12-09 01:31:23.723 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:23.726 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:23.728 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:31:23.730 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-09 01:31:23.732 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-09 01:31:23.734 +02:00 [DBG] Executing DbCommand [Parameters=[@p8='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (Size = 30)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [CleanArium].[Users] SET [CreatedAt] = @p0, [Email] = @p1, [IsBlocked] = @p2, [LastLoginAt] = @p3, [PasswordHash] = @p4, [Role] = @p5, [Salt] = @p6, [UserName] = @p7
OUTPUT 1
WHERE [Id] = @p8;
2025-12-09 01:31:23.746 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p8='?' (DbType = Int64), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (Size = 30)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [CleanArium].[Users] SET [CreatedAt] = @p0, [Email] = @p1, [IsBlocked] = @p2, [LastLoginAt] = @p3, [PasswordHash] = @p4, [Role] = @p5, [Salt] = @p6, [UserName] = @p7
OUTPUT 1
WHERE [Id] = @p8;
2025-12-09 01:31:23.755 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:23.766 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 14ms reading results.
2025-12-09 01:31:23.769 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:23.774 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (5ms).
2025-12-09 01:31:23.779 +02:00 [DBG] An entity of type 'User' tracked by 'CleanAriumDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:31:23.782 +02:00 [DBG] SaveChanges completed for 'CleanAriumDbContext' with 1 entities written to the database.
2025-12-09 01:31:23.800 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-09 01:31:23.814 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-09 01:31:23.815 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-09 01:31:23.816 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-09 01:31:23.819 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-09 01:31:23.823 +02:00 [INF] Executing OkObjectResult, writing value of type 'Application.DTOs.Auth.AuthResponseDto'.
2025-12-09 01:31:23.836 +02:00 [INF] Executed action CleanArium.Controllers.AuthController.Login (CleanArium) in 1234.9135ms
2025-12-09 01:31:23.841 +02:00 [INF] Executed endpoint 'CleanArium.Controllers.AuthController.Login (CleanArium)'
2025-12-09 01:31:23.845 +02:00 [DBG] 'CleanAriumDbContext' disposed.
2025-12-09 01:31:23.851 +02:00 [DBG] Disposing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:23.856 +02:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-12-09 01:31:23.863 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7085/api/Auth/login - 200 null application/json; charset=utf-8 1431.0648ms
2025-12-09 01:31:29.070 +02:00 [DBG] Connection id "0HNHMM773JLV1" received FIN.
2025-12-09 01:31:29.075 +02:00 [DBG] Connection id "0HNHMM773JLV1" is closed. The last processed stream ID was 1.
2025-12-09 01:31:29.075 +02:00 [DBG] The connection queue processing loop for 0HNHMM773JLV1 completed.
2025-12-09 01:31:29.077 +02:00 [DBG] Connection id "0HNHMM773JLV1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 01:31:29.091 +02:00 [DBG] Connection id "0HNHMM773JLV1" stopped.
2025-12-09 01:31:41.494 +02:00 [DBG] Connection id "0HNHMM773JLV2" accepted.
2025-12-09 01:31:41.531 +02:00 [DBG] Connection id "0HNHMM773JLV2" started.
2025-12-09 01:31:41.544 +02:00 [DBG] Connection 0HNHMM773JLV2 established using the following protocol: "Tls13"
2025-12-09 01:31:41.547 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/api/AlarmRule/get-by-id/1 - null null
2025-12-09 01:31:41.568 +02:00 [DBG] 1 candidate(s) found for the request path '/api/AlarmRule/get-by-id/1'
2025-12-09 01:31:41.578 +02:00 [DBG] Endpoint 'CleanArium.Controllers.AlarmRuleController.GetById (CleanArium)' with route pattern 'api/AlarmRule/get-by-id/{ruleId:long}' is valid for the request path '/api/AlarmRule/get-by-id/1'
2025-12-09 01:31:41.585 +02:00 [DBG] Request matched endpoint 'CleanArium.Controllers.AlarmRuleController.GetById (CleanArium)'
2025-12-09 01:31:41.746 +02:00 [DBG] Successfully validated the token.
2025-12-09 01:31:41.753 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-12-09 01:31:41.777 +02:00 [DBG] Authorization was successful.
2025-12-09 01:31:41.781 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-09 01:31:41.783 +02:00 [INF] Executing endpoint 'CleanArium.Controllers.AlarmRuleController.GetById (CleanArium)'
2025-12-09 01:31:41.799 +02:00 [INF] Route matched with {action = "GetById", controller = "AlarmRule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(Int64, System.Threading.CancellationToken) on controller CleanArium.Controllers.AlarmRuleController (CleanArium).
2025-12-09 01:31:41.802 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-09 01:31:41.810 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-09 01:31:41.859 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-09 01:31:41.863 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-09 01:31:41.865 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-09 01:31:41.868 +02:00 [DBG] Executing controller factory for controller CleanArium.Controllers.AlarmRuleController (CleanArium)
2025-12-09 01:31:41.898 +02:00 [DBG] Executed controller factory for controller CleanArium.Controllers.AlarmRuleController (CleanArium)
2025-12-09 01:31:41.906 +02:00 [DBG] Attempting to bind parameter 'ruleId' of type 'System.Int64' ...
2025-12-09 01:31:41.915 +02:00 [DBG] Attempting to bind parameter 'ruleId' of type 'System.Int64' using the name 'ruleId' in request data ...
2025-12-09 01:31:41.919 +02:00 [DBG] Done attempting to bind parameter 'ruleId' of type 'System.Int64'.
2025-12-09 01:31:41.996 +02:00 [DBG] Done attempting to bind parameter 'ruleId' of type 'System.Int64'.
2025-12-09 01:31:42.014 +02:00 [DBG] Attempting to validate the bound parameter 'ruleId' of type 'System.Int64' ...
2025-12-09 01:31:42.036 +02:00 [DBG] Done attempting to validate the bound parameter 'ruleId' of type 'System.Int64'.
2025-12-09 01:31:42.040 +02:00 [DBG] Attempting to bind parameter 'ct' of type 'System.Threading.CancellationToken' ...
2025-12-09 01:31:42.044 +02:00 [DBG] Done attempting to bind parameter 'ct' of type 'System.Threading.CancellationToken'.
2025-12-09 01:31:42.047 +02:00 [DBG] Attempting to validate the bound parameter 'ct' of type 'System.Threading.CancellationToken' ...
2025-12-09 01:31:42.051 +02:00 [DBG] Done attempting to validate the bound parameter 'ct' of type 'System.Threading.CancellationToken'.
2025-12-09 01:31:42.107 +02:00 [DBG] Entity Framework Core 8.0.18 initialized 'CleanAriumDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.18' with options: MigrationsAssembly=Persistence 
2025-12-09 01:31:42.115 +02:00 [DBG] Compiling query expression: 
'DbSet<AlarmRule>()
    .Any(x => x.Id == __ruleId_0)'
2025-12-09 01:31:42.148 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM CleanArium.AlarmRules AS a
                WHERE a.Id == @__ruleId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        Persistence.Application.CleanAriumDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-09 01:31:42.191 +02:00 [DBG] Creating DbConnection.
2025-12-09 01:31:42.212 +02:00 [DBG] Created DbConnection. (20ms).
2025-12-09 01:31:42.216 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:42.232 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:42.237 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:31:42.249 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (11ms).
2025-12-09 01:31:42.253 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (16ms).
2025-12-09 01:31:42.267 +02:00 [DBG] Executing DbCommand [Parameters=[@__ruleId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [CleanArium].[AlarmRules] AS [a]
        WHERE [a].[Id] = @__ruleId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 01:31:42.693 +02:00 [INF] Executed DbCommand (427ms) [Parameters=[@__ruleId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [CleanArium].[AlarmRules] AS [a]
        WHERE [a].[Id] = @__ruleId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 01:31:42.830 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:42.832 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 5ms reading results.
2025-12-09 01:31:42.836 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:42.844 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (7ms).
2025-12-09 01:31:42.853 +02:00 [DBG] Compiling query expression: 
'DbSet<AlarmRule>()
    .FirstOrDefault(x => x.Id == __id_0)'
2025-12-09 01:31:42.865 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AlarmRule>(
    asyncEnumerable: new SingleQueryingEnumerable<AlarmRule>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AlarmRule.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AlarmRule.Condition (ConditionType) Required, 1], [Property: AlarmRule.DeviceId (long) Required FK Index, 2], [Property: AlarmRule.IsActive (bool) Required, 3], [Property: AlarmRule.Threshold (float) Required, 4], [Property: AlarmRule.Unit (string) Required, 5] }
            SELECT TOP(1) a.Id, a.Condition, a.DeviceId, a.IsActive, a.Threshold, a.Unit
            FROM CleanArium.AlarmRules AS a
            WHERE a.Id == @__id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, AlarmRule>, 
        Persistence.Application.CleanAriumDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-09 01:31:42.868 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:42.869 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:42.874 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:31:42.876 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-09 01:31:42.877 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-09 01:31:42.879 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Condition], [a].[DeviceId], [a].[IsActive], [a].[Threshold], [a].[Unit]
FROM [CleanArium].[AlarmRules] AS [a]
WHERE [a].[Id] = @__id_0
2025-12-09 01:31:42.958 +02:00 [INF] Executed DbCommand (74ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Condition], [a].[DeviceId], [a].[IsActive], [a].[Threshold], [a].[Unit]
FROM [CleanArium].[AlarmRules] AS [a]
WHERE [a].[Id] = @__id_0
2025-12-09 01:31:42.985 +02:00 [DBG] Context 'CleanAriumDbContext' started tracking 'AlarmRule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:31:43.012 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:43.016 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 41ms reading results.
2025-12-09 01:31:43.019 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:43.023 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (3ms).
2025-12-09 01:31:43.027 +02:00 [INF] Successfully retrieved alarm rule: 1 
2025-12-09 01:31:43.031 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-09 01:31:43.035 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-09 01:31:43.036 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-09 01:31:43.040 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-09 01:31:43.042 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-09 01:31:43.044 +02:00 [INF] Executing OkObjectResult, writing value of type 'Application.DTOs.AlarmRules.AlarmRuleDto'.
2025-12-09 01:31:43.079 +02:00 [INF] Executed action CleanArium.Controllers.AlarmRuleController.GetById (CleanArium) in 1211.9491ms
2025-12-09 01:31:43.082 +02:00 [INF] Executed endpoint 'CleanArium.Controllers.AlarmRuleController.GetById (CleanArium)'
2025-12-09 01:31:43.083 +02:00 [DBG] 'CleanAriumDbContext' disposed.
2025-12-09 01:31:43.085 +02:00 [DBG] Disposing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:43.087 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-09 01:31:43.092 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/api/AlarmRule/get-by-id/1 - 200 null application/json; charset=utf-8 1545.6143ms
2025-12-09 01:31:49.077 +02:00 [DBG] Connection id "0HNHMM773JLV2" received FIN.
2025-12-09 01:31:49.087 +02:00 [DBG] Connection id "0HNHMM773JLV2" is closed. The last processed stream ID was 1.
2025-12-09 01:31:49.088 +02:00 [DBG] The connection queue processing loop for 0HNHMM773JLV2 completed.
2025-12-09 01:31:49.090 +02:00 [DBG] Connection id "0HNHMM773JLV2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 01:31:49.099 +02:00 [DBG] Connection id "0HNHMM773JLV2" stopped.
2025-12-09 01:31:55.240 +02:00 [DBG] Connection id "0HNHMM773JLV3" accepted.
2025-12-09 01:31:55.250 +02:00 [DBG] Connection id "0HNHMM773JLV3" started.
2025-12-09 01:31:55.263 +02:00 [DBG] Connection 0HNHMM773JLV3 established using the following protocol: "Tls13"
2025-12-09 01:31:55.267 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7085/api/AlarmRule/1/deactivate - null 0
2025-12-09 01:31:55.276 +02:00 [DBG] 1 candidate(s) found for the request path '/api/AlarmRule/1/deactivate'
2025-12-09 01:31:55.279 +02:00 [DBG] Endpoint 'CleanArium.Controllers.AlarmRuleController.DeactivateAlarmRule (CleanArium)' with route pattern 'api/AlarmRule/{id}/deactivate' is valid for the request path '/api/AlarmRule/1/deactivate'
2025-12-09 01:31:55.281 +02:00 [DBG] Request matched endpoint 'CleanArium.Controllers.AlarmRuleController.DeactivateAlarmRule (CleanArium)'
2025-12-09 01:31:55.284 +02:00 [DBG] Successfully validated the token.
2025-12-09 01:31:55.285 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-12-09 01:31:55.293 +02:00 [DBG] Authorization was successful.
2025-12-09 01:31:55.295 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-09 01:31:55.297 +02:00 [INF] Executing endpoint 'CleanArium.Controllers.AlarmRuleController.DeactivateAlarmRule (CleanArium)'
2025-12-09 01:31:55.310 +02:00 [INF] Route matched with {action = "DeactivateAlarmRule", controller = "AlarmRule"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeactivateAlarmRule(Int64) on controller CleanArium.Controllers.AlarmRuleController (CleanArium).
2025-12-09 01:31:55.343 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-09 01:31:55.345 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-09 01:31:55.346 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-09 01:31:55.349 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-09 01:31:55.360 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-09 01:31:55.362 +02:00 [DBG] Executing controller factory for controller CleanArium.Controllers.AlarmRuleController (CleanArium)
2025-12-09 01:31:55.364 +02:00 [DBG] Executed controller factory for controller CleanArium.Controllers.AlarmRuleController (CleanArium)
2025-12-09 01:31:55.366 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int64' ...
2025-12-09 01:31:55.369 +02:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int64' using the name 'id' in request data ...
2025-12-09 01:31:55.372 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int64'.
2025-12-09 01:31:55.375 +02:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int64'.
2025-12-09 01:31:55.376 +02:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int64' ...
2025-12-09 01:31:55.378 +02:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int64'.
2025-12-09 01:31:55.401 +02:00 [DBG] Entity Framework Core 8.0.18 initialized 'CleanAriumDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.18' with options: MigrationsAssembly=Persistence 
2025-12-09 01:31:55.405 +02:00 [DBG] Creating DbConnection.
2025-12-09 01:31:55.407 +02:00 [DBG] Created DbConnection. (2ms).
2025-12-09 01:31:55.409 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:55.411 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:55.413 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:31:55.415 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-09 01:31:55.416 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-12-09 01:31:55.418 +02:00 [DBG] Executing DbCommand [Parameters=[@__ruleId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [CleanArium].[AlarmRules] AS [a]
        WHERE [a].[Id] = @__ruleId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 01:31:55.437 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__ruleId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [CleanArium].[AlarmRules] AS [a]
        WHERE [a].[Id] = @__ruleId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 01:31:55.443 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:55.445 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 2ms reading results.
2025-12-09 01:31:55.447 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:55.448 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (1ms).
2025-12-09 01:31:55.457 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:55.460 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:55.462 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:31:55.463 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-09 01:31:55.464 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-12-09 01:31:55.466 +02:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Condition], [a].[DeviceId], [a].[IsActive], [a].[Threshold], [a].[Unit]
FROM [CleanArium].[AlarmRules] AS [a]
WHERE [a].[Id] = @__id_0
2025-12-09 01:31:55.473 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Condition], [a].[DeviceId], [a].[IsActive], [a].[Threshold], [a].[Unit]
FROM [CleanArium].[AlarmRules] AS [a]
WHERE [a].[Id] = @__id_0
2025-12-09 01:31:55.477 +02:00 [DBG] Context 'CleanAriumDbContext' started tracking 'AlarmRule' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:31:55.479 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:55.480 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 3ms reading results.
2025-12-09 01:31:55.482 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:55.484 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (1ms).
2025-12-09 01:31:55.489 +02:00 [DBG] An entity of type 'AlarmRule' tracked by 'CleanAriumDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:31:55.491 +02:00 [DBG] SaveChanges starting for 'CleanAriumDbContext'.
2025-12-09 01:31:55.493 +02:00 [DBG] DetectChanges starting for 'CleanAriumDbContext'.
2025-12-09 01:31:55.496 +02:00 [DBG] DetectChanges completed for 'CleanAriumDbContext'.
2025-12-09 01:31:55.512 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:55.514 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:55.515 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:31:55.516 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-12-09 01:31:55.520 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-12-09 01:31:55.522 +02:00 [DBG] Executing DbCommand [Parameters=[@p5='?' (DbType = Int64), @p0='?' (DbType = Int32), @p1='?' (DbType = Int64), @p2='?' (DbType = Boolean), @p3='?' (DbType = Single), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [CleanArium].[AlarmRules] SET [Condition] = @p0, [DeviceId] = @p1, [IsActive] = @p2, [Threshold] = @p3, [Unit] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-12-09 01:31:55.551 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@p5='?' (DbType = Int64), @p0='?' (DbType = Int32), @p1='?' (DbType = Int64), @p2='?' (DbType = Boolean), @p3='?' (DbType = Single), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [CleanArium].[AlarmRules] SET [Condition] = @p0, [DeviceId] = @p1, [IsActive] = @p2, [Threshold] = @p3, [Unit] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-12-09 01:31:55.558 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:55.560 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 2ms reading results.
2025-12-09 01:31:55.566 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:55.573 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (6ms).
2025-12-09 01:31:55.577 +02:00 [DBG] An entity of type 'AlarmRule' tracked by 'CleanAriumDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:31:55.580 +02:00 [DBG] SaveChanges completed for 'CleanAriumDbContext' with 1 entities written to the database.
2025-12-09 01:31:55.584 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-09 01:31:55.590 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-09 01:31:55.591 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-09 01:31:55.593 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-09 01:31:55.594 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-12-09 01:31:55.597 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-12-09 01:31:55.600 +02:00 [INF] Executed action CleanArium.Controllers.AlarmRuleController.DeactivateAlarmRule (CleanArium) in 238.5296ms
2025-12-09 01:31:55.604 +02:00 [INF] Executed endpoint 'CleanArium.Controllers.AlarmRuleController.DeactivateAlarmRule (CleanArium)'
2025-12-09 01:31:55.607 +02:00 [DBG] 'CleanAriumDbContext' disposed.
2025-12-09 01:31:55.609 +02:00 [DBG] Disposing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:31:55.611 +02:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-12-09 01:31:55.613 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7085/api/AlarmRule/1/deactivate - 200 null text/plain; charset=utf-8 345.3866ms
2025-12-09 01:32:14.102 +02:00 [DBG] Connection id "0HNHMM773JLV3" received FIN.
2025-12-09 01:32:14.109 +02:00 [DBG] Connection id "0HNHMM773JLV3" is closed. The last processed stream ID was 1.
2025-12-09 01:32:14.109 +02:00 [DBG] The connection queue processing loop for 0HNHMM773JLV3 completed.
2025-12-09 01:32:14.111 +02:00 [DBG] Connection id "0HNHMM773JLV3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-12-09 01:32:14.121 +02:00 [DBG] Connection id "0HNHMM773JLV3" stopped.
2025-12-09 01:32:19.239 +02:00 [DBG] Connection id "0HNHMM773JLV4" accepted.
2025-12-09 01:32:19.251 +02:00 [DBG] Connection id "0HNHMM773JLV4" started.
2025-12-09 01:32:19.261 +02:00 [DBG] Connection 0HNHMM773JLV4 established using the following protocol: "Tls13"
2025-12-09 01:32:19.285 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/api/Admin/system-settings - null null
2025-12-09 01:32:19.298 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Admin/system-settings'
2025-12-09 01:32:19.300 +02:00 [DBG] Endpoint 'CleanArium.Controllers.AdminController.Get (CleanArium)' with route pattern 'api/Admin/system-settings' is valid for the request path '/api/Admin/system-settings'
2025-12-09 01:32:19.301 +02:00 [DBG] Request matched endpoint 'CleanArium.Controllers.AdminController.Get (CleanArium)'
2025-12-09 01:32:19.303 +02:00 [DBG] Successfully validated the token.
2025-12-09 01:32:19.309 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-12-09 01:32:19.315 +02:00 [DBG] Authorization was successful.
2025-12-09 01:32:19.317 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-09 01:32:19.318 +02:00 [INF] Executing endpoint 'CleanArium.Controllers.AdminController.Get (CleanArium)'
2025-12-09 01:32:19.338 +02:00 [INF] Route matched with {action = "Get", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller CleanArium.Controllers.AdminController (CleanArium).
2025-12-09 01:32:19.381 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-09 01:32:19.383 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-09 01:32:19.384 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-09 01:32:19.386 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-09 01:32:19.399 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-09 01:32:19.415 +02:00 [DBG] Executing controller factory for controller CleanArium.Controllers.AdminController (CleanArium)
2025-12-09 01:32:19.416 +02:00 [DBG] Executed controller factory for controller CleanArium.Controllers.AdminController (CleanArium)
2025-12-09 01:32:19.430 +02:00 [DBG] Entity Framework Core 8.0.18 initialized 'CleanAriumDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.18' with options: MigrationsAssembly=Persistence 
2025-12-09 01:32:19.434 +02:00 [DBG] Compiling query expression: 
'DbSet<SystemSettings>()
    .FirstOrDefault()'
2025-12-09 01:32:19.442 +02:00 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-12-09 01:32:19.459 +02:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<SystemSettings>(
    asyncEnumerable: new SingleQueryingEnumerable<SystemSettings>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: SystemSettings.Id (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: SystemSettings.MaxAlarmRulesPerDevice (int) Required, 1], [Property: SystemSettings.MaxAquariumsPerUser (int) Required, 2], [Property: SystemSettings.MaxDevicesPerAquarium (int) Required, 3], [Property: SystemSettings.MaxScheduledCommandsPerDevice (int) Required, 4] }
            SELECT TOP(1) s.Id, s.MaxAlarmRulesPerDevice, s.MaxAquariumsPerUser, s.MaxDevicesPerAquarium, s.MaxScheduledCommandsPerDevice
            FROM CleanArium.SystemSettings AS s), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, SystemSettings>, 
        Persistence.Application.CleanAriumDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-12-09 01:32:19.466 +02:00 [DBG] Creating DbConnection.
2025-12-09 01:32:19.467 +02:00 [DBG] Created DbConnection. (1ms).
2025-12-09 01:32:19.468 +02:00 [DBG] Opening connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:32:19.471 +02:00 [DBG] Opened connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:32:19.496 +02:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-12-09 01:32:19.498 +02:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-12-09 01:32:19.500 +02:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-12-09 01:32:19.502 +02:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[MaxAlarmRulesPerDevice], [s].[MaxAquariumsPerUser], [s].[MaxDevicesPerAquarium], [s].[MaxScheduledCommandsPerDevice]
FROM [CleanArium].[SystemSettings] AS [s]
2025-12-09 01:32:19.519 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[MaxAlarmRulesPerDevice], [s].[MaxAquariumsPerUser], [s].[MaxDevicesPerAquarium], [s].[MaxScheduledCommandsPerDevice]
FROM [CleanArium].[SystemSettings] AS [s]
2025-12-09 01:32:19.528 +02:00 [DBG] Context 'CleanAriumDbContext' started tracking 'SystemSettings' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-12-09 01:32:19.536 +02:00 [DBG] Closing data reader to 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:32:19.537 +02:00 [DBG] A data reader for 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' is being disposed after spending 14ms reading results.
2025-12-09 01:32:19.540 +02:00 [DBG] Closing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:32:19.541 +02:00 [DBG] Closed connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01' (1ms).
2025-12-09 01:32:19.544 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-09 01:32:19.547 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-09 01:32:19.548 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-09 01:32:19.549 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-09 01:32:19.550 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-12-09 01:32:19.551 +02:00 [INF] Executing OkObjectResult, writing value of type 'Application.DTOs.SystemSettings.SystemSettingsDto'.
2025-12-09 01:32:19.556 +02:00 [INF] Executed action CleanArium.Controllers.AdminController.Get (CleanArium) in 141.1728ms
2025-12-09 01:32:19.558 +02:00 [INF] Executed endpoint 'CleanArium.Controllers.AdminController.Get (CleanArium)'
2025-12-09 01:32:19.559 +02:00 [DBG] 'CleanAriumDbContext' disposed.
2025-12-09 01:32:19.561 +02:00 [DBG] Disposing connection to database 'CleanAriumDb' on server 'localhost\SQLEXPRESS01'.
2025-12-09 01:32:19.566 +02:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-12-09 01:32:19.567 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/api/Admin/system-settings - 200 null application/json; charset=utf-8 282.7719ms
2025-12-09 01:32:28.643 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7085/api/Admin/logs - null null
2025-12-09 01:32:28.652 +02:00 [DBG] 1 candidate(s) found for the request path '/api/Admin/logs'
2025-12-09 01:32:28.655 +02:00 [DBG] Endpoint 'CleanArium.Controllers.AdminController.GetLogs (CleanArium)' with route pattern 'api/Admin/logs' is valid for the request path '/api/Admin/logs'
2025-12-09 01:32:28.659 +02:00 [DBG] Request matched endpoint 'CleanArium.Controllers.AdminController.GetLogs (CleanArium)'
2025-12-09 01:32:28.660 +02:00 [DBG] Successfully validated the token.
2025-12-09 01:32:28.662 +02:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-12-09 01:32:28.663 +02:00 [DBG] Authorization was successful.
2025-12-09 01:32:28.666 +02:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-12-09 01:32:28.667 +02:00 [INF] Executing endpoint 'CleanArium.Controllers.AdminController.GetLogs (CleanArium)'
2025-12-09 01:32:28.670 +02:00 [INF] Route matched with {action = "GetLogs", controller = "Admin"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetLogs(Microsoft.AspNetCore.Hosting.IWebHostEnvironment) on controller CleanArium.Controllers.AdminController (CleanArium).
2025-12-09 01:32:28.675 +02:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-12-09 01:32:28.677 +02:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-12-09 01:32:28.680 +02:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-12-09 01:32:28.682 +02:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-12-09 01:32:28.684 +02:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-12-09 01:32:28.685 +02:00 [DBG] Executing controller factory for controller CleanArium.Controllers.AdminController (CleanArium)
2025-12-09 01:32:28.686 +02:00 [DBG] Executed controller factory for controller CleanArium.Controllers.AdminController (CleanArium)
2025-12-09 01:32:28.691 +02:00 [DBG] Attempting to bind parameter 'env' of type 'Microsoft.AspNetCore.Hosting.IWebHostEnvironment' ...
2025-12-09 01:32:28.693 +02:00 [DBG] Done attempting to bind parameter 'env' of type 'Microsoft.AspNetCore.Hosting.IWebHostEnvironment'.
2025-12-09 01:32:28.695 +02:00 [DBG] Attempting to validate the bound parameter 'env' of type 'Microsoft.AspNetCore.Hosting.IWebHostEnvironment' ...
2025-12-09 01:32:28.696 +02:00 [DBG] Done attempting to validate the bound parameter 'env' of type 'Microsoft.AspNetCore.Hosting.IWebHostEnvironment'.
2025-12-09 01:32:28.699 +02:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-12-09 01:32:28.701 +02:00 [DBG] No information found on request to perform content negotiation.
2025-12-09 01:32:28.702 +02:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-12-09 01:32:28.703 +02:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-12-09 01:32:28.706 +02:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2025-12-09 01:32:28.708 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2025-12-09 01:32:28.711 +02:00 [INF] Executed action CleanArium.Controllers.AdminController.GetLogs (CleanArium) in 25.5169ms
2025-12-09 01:32:28.713 +02:00 [INF] Executed endpoint 'CleanArium.Controllers.AdminController.GetLogs (CleanArium)'
2025-12-09 01:32:28.715 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7085/api/Admin/logs - 404 null text/plain; charset=utf-8 72.2572ms
2025-12-09 01:39:22.943 +02:00 [INF] Application starting
2025-12-09 01:39:27.499 +02:00 [INF] Checking if admin user exists...
2025-12-09 01:39:28.749 +02:00 [INF] Admin already exists. Skipping seeding.
2025-12-09 01:39:29.472 +02:00 [INF] Refresh token cleanup service started.
2025-12-09 01:40:26.798 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-09 01:40:27.913 +02:00 [INF] Successful login for user: 1 
2025-12-09 01:45:51.079 +02:00 [INF] Application starting
2025-12-09 01:45:54.122 +02:00 [INF] Checking if admin user exists...
2025-12-09 01:45:55.029 +02:00 [INF] Admin already exists. Skipping seeding.
2025-12-09 01:45:55.473 +02:00 [INF] Refresh token cleanup service started.
2025-12-09 01:46:24.726 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-09 01:46:26.167 +02:00 [INF] Successful login for user: 1 
2025-12-09 01:49:57.312 +02:00 [INF] Application starting
2025-12-09 01:50:00.586 +02:00 [INF] Checking if admin user exists...
2025-12-09 01:50:01.906 +02:00 [INF] Admin already exists. Skipping seeding.
2025-12-09 01:50:02.502 +02:00 [INF] Refresh token cleanup service started.
2025-12-09 01:50:55.616 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-09 01:50:57.372 +02:00 [INF] Successful login for user: 1 
2025-12-09 18:58:32.478 +02:00 [INF] Application starting
2025-12-09 18:58:37.200 +02:00 [INF] Checking if admin user exists...
2025-12-09 18:58:38.192 +02:00 [INF] Admin already exists. Skipping seeding.
2025-12-09 18:58:38.556 +02:00 [INF] Refresh token cleanup service started.
2025-12-09 18:58:44.775 +02:00 [ERR] Unhandled exception
System.InvalidOperationException: The constraint reference ' int' could not be resolved to a type. Register the constraint type with 'Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap'.
   at Microsoft.AspNetCore.Routing.DefaultParameterPolicyFactory.Create(RoutePatternParameterPart parameter, String inlineText)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.CachingParameterPolicyFactory.Create(RoutePatternParameterPart parameter, String inlineText)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.DfaBuilderWorker.AddParentsWithMatchingLiteralConstraints(List`1 nextParents, DfaNode parent, RoutePatternParameterPart parameterPart, IReadOnlyList`1 parameterPolicyReferences)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.DfaBuilderWorker.ProcessSegment(RouteEndpoint endpoint, List`1 parents, List`1 nextParents, RoutePatternPathSegment segment)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.DfaBuilderWorker.ProcessLevel(Int32 depth)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.BuildDfaTree(Boolean includeLabel)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.Build()
   at Microsoft.AspNetCore.Routing.Matching.DataSourceDependentMatcher.CreateMatcher(IReadOnlyList`1 endpoints)
   at Microsoft.AspNetCore.Routing.DataSourceDependentCache`1.Initialize()
   at System.Threading.LazyInitializer.EnsureInitializedCore[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
   at Microsoft.AspNetCore.Routing.Matching.DataSourceDependentMatcher..ctor(EndpointDataSource dataSource, Lifetime lifetime, Func`1 matcherBuilderFactory)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherFactory.CreateMatcher(EndpointDataSource dataSource)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.InitializeCoreAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.<Invoke>g__AwaitMatcher|10_0(EndpointRoutingMiddleware middleware, HttpContext httpContext, Task`1 matcherTask)
   at CleanArium.Middleware.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\User\source\repos\CleanArium\CleanArium\Middleware\ExceptionMiddleware.cs:line 18
2025-12-09 18:58:45.335 +02:00 [ERR] Unhandled exception
System.InvalidOperationException: The constraint reference ' int' could not be resolved to a type. Register the constraint type with 'Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap'.
   at Microsoft.AspNetCore.Routing.DefaultParameterPolicyFactory.Create(RoutePatternParameterPart parameter, String inlineText)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.CachingParameterPolicyFactory.Create(RoutePatternParameterPart parameter, String inlineText)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.DfaBuilderWorker.AddParentsWithMatchingLiteralConstraints(List`1 nextParents, DfaNode parent, RoutePatternParameterPart parameterPart, IReadOnlyList`1 parameterPolicyReferences)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.DfaBuilderWorker.ProcessSegment(RouteEndpoint endpoint, List`1 parents, List`1 nextParents, RoutePatternPathSegment segment)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.DfaBuilderWorker.ProcessLevel(Int32 depth)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.BuildDfaTree(Boolean includeLabel)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherBuilder.Build()
   at Microsoft.AspNetCore.Routing.Matching.DataSourceDependentMatcher.CreateMatcher(IReadOnlyList`1 endpoints)
   at Microsoft.AspNetCore.Routing.DataSourceDependentCache`1.Initialize()
   at System.Threading.LazyInitializer.EnsureInitializedCore[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
   at Microsoft.AspNetCore.Routing.Matching.DataSourceDependentMatcher..ctor(EndpointDataSource dataSource, Lifetime lifetime, Func`1 matcherBuilderFactory)
   at Microsoft.AspNetCore.Routing.Matching.DfaMatcherFactory.CreateMatcher(EndpointDataSource dataSource)
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.InitializeCoreAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.<Invoke>g__AwaitMatcher|10_0(EndpointRoutingMiddleware middleware, HttpContext httpContext, Task`1 matcherTask)
   at CleanArium.Middleware.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\User\source\repos\CleanArium\CleanArium\Middleware\ExceptionMiddleware.cs:line 18
2025-12-09 19:02:23.770 +02:00 [INF] Application starting
2025-12-09 19:02:27.563 +02:00 [INF] Checking if admin user exists...
2025-12-09 19:02:28.999 +02:00 [INF] Admin already exists. Skipping seeding.
2025-12-09 19:02:29.574 +02:00 [INF] Refresh token cleanup service started.
2025-12-09 19:04:07.273 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-09 19:04:09.091 +02:00 [INF] Successful login for user: 1 
2025-12-09 19:05:08.348 +02:00 [ERR] Unhandled exception
System.IO.DirectoryNotFoundException: Could not find a part of the path 'C:\Users\User\source\repos\CleanArium\CleanArium\bin\Debug\net8.0\logs'.
   at System.IO.Enumeration.FileSystemEnumerator`1.CreateDirectoryHandle(String path, Boolean ignoreNotFound)
   at System.IO.Enumeration.FileSystemEnumerator`1.Init()
   at System.IO.Enumeration.FileSystemEnumerable`1..ctor(String directory, FindTransform transform, EnumerationOptions options, Boolean isNormalized)
   at System.IO.Enumeration.FileSystemEnumerableFactory.UserFiles(String directory, String expression, EnumerationOptions options)
   at System.IO.Directory.InternalEnumeratePaths(String path, String searchPattern, SearchTarget searchTarget, EnumerationOptions options)
   at System.IO.Directory.GetFiles(String path, String searchPattern, EnumerationOptions enumerationOptions)
   at Persistence.Services.UserActivityService.GetDailyStatsAsync(Int32 days) in C:\Users\User\source\repos\CleanArium\Persistence\Services\UserActivityService.cs:line 30
   at CleanArium.Controllers.AdminController.GetDailyActivity(Int32 days) in C:\Users\User\source\repos\CleanArium\CleanArium\Controllers\AdminController.cs:line 120
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at CleanArium.Middleware.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\User\source\repos\CleanArium\CleanArium\Middleware\ExceptionMiddleware.cs:line 18
2025-12-09 21:09:02.103 +02:00 [INF] Application starting
2025-12-09 21:09:06.500 +02:00 [INF] Checking if admin user exists...
2025-12-09 21:09:07.438 +02:00 [INF] Admin already exists. Skipping seeding.
2025-12-09 21:09:07.822 +02:00 [INF] Refresh token cleanup service started.
2025-12-09 21:09:48.788 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-09 21:09:50.031 +02:00 [INF] Successful login for user: 1 
2025-12-09 21:10:10.102 +02:00 [ERR] Unhandled exception
System.IO.DirectoryNotFoundException: Could not find a part of the path 'C:\Users\User\source\repos\CleanArium\CleanArium\bin\Debug\net8.0\logs'.
   at System.IO.Enumeration.FileSystemEnumerator`1.CreateDirectoryHandle(String path, Boolean ignoreNotFound)
   at System.IO.Enumeration.FileSystemEnumerator`1.Init()
   at System.IO.Enumeration.FileSystemEnumerable`1..ctor(String directory, FindTransform transform, EnumerationOptions options, Boolean isNormalized)
   at System.IO.Enumeration.FileSystemEnumerableFactory.UserFiles(String directory, String expression, EnumerationOptions options)
   at System.IO.Directory.InternalEnumeratePaths(String path, String searchPattern, SearchTarget searchTarget, EnumerationOptions options)
   at System.IO.Directory.GetFiles(String path, String searchPattern, EnumerationOptions enumerationOptions)
   at Persistence.Services.UserActivityService.GetDailyStatsAsync(Int32 days) in C:\Users\User\source\repos\CleanArium\Persistence\Services\UserActivityService.cs:line 32
   at CleanArium.Controllers.AdminController.GetDailyActivity(Int32 days) in C:\Users\User\source\repos\CleanArium\CleanArium\Controllers\AdminController.cs:line 117
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at CleanArium.Middleware.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\User\source\repos\CleanArium\CleanArium\Middleware\ExceptionMiddleware.cs:line 18
2025-12-09 21:26:00.339 +02:00 [INF] Successfully retrieved messages for Admin.
2025-12-09 21:28:06.635 +02:00 [INF] Application starting
2025-12-09 21:28:10.890 +02:00 [INF] Checking if admin user exists...
2025-12-09 21:28:11.497 +02:00 [INF] Admin already exists. Skipping seeding.
2025-12-09 21:28:12.130 +02:00 [INF] Refresh token cleanup service started.
2025-12-09 21:29:37.208 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-09 21:29:38.424 +02:00 [INF] Successful login for user: 1 
2025-12-09 21:31:13.839 +02:00 [INF] Application starting
2025-12-09 21:31:18.048 +02:00 [INF] Checking if admin user exists...
2025-12-09 21:31:18.766 +02:00 [INF] Admin already exists. Skipping seeding.
2025-12-09 21:31:19.336 +02:00 [INF] Refresh token cleanup service started.
2025-12-09 21:32:22.705 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-09 21:32:23.785 +02:00 [INF] Successful login for user: 1 
2025-12-09 21:46:58.234 +02:00 [INF] Application starting
2025-12-09 21:47:02.236 +02:00 [INF] Checking if admin user exists...
2025-12-09 21:47:03.438 +02:00 [INF] Admin already exists. Skipping seeding.
2025-12-09 21:47:03.876 +02:00 [INF] Refresh token cleanup service started.
2025-12-09 21:48:09.910 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-09 21:48:11.048 +02:00 [INF] Successful registration for user: 5 
2025-12-09 21:48:32.419 +02:00 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-12-09 21:48:33.044 +02:00 [ERR] Unhandled exception
FluentValidation.ValidationException: Validation failed: 
 -- : Maximum aquariums per parameter was exceeded. Severity: Error
   at CleanArium.Extensions.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\User\source\repos\CleanArium\CleanArium\Extensions\ValidationBehavior.cs:line 34
   at CleanArium.Controllers.AquariumController.Create(CreateAquariumRequest request, CancellationToken ct) in C:\Users\User\source\repos\CleanArium\CleanArium\Controllers\AquariumController.cs:line 55
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at CleanArium.Middleware.ExceptionMiddleware.Invoke(HttpContext context) in C:\Users\User\source\repos\CleanArium\CleanArium\Middleware\ExceptionMiddleware.cs:line 18
2025-12-09 21:53:14.792 +02:00 [INF] Application starting
2025-12-09 21:53:18.342 +02:00 [INF] Checking if admin user exists...
2025-12-09 21:53:19.585 +02:00 [INF] Admin already exists. Skipping seeding.
2025-12-09 21:53:20.121 +02:00 [INF] Refresh token cleanup service started.
2025-12-09 21:54:31.902 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-12-09 21:54:33.394 +02:00 [INF] Successful login for user: 5 
2025-12-09 21:54:50.187 +02:00 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-12-09 21:54:50.327 +02:00 [INF] USER_ACTION Aquarium created: 4 by User 5
2025-12-09 21:55:00.637 +02:00 [INF] USER_ACTION Successfully retrieved aquariums for user: 5 
2025-12-09 21:55:08.273 +02:00 [WRN] USER_ACTION Aquarium 4 deleted
2025-12-09 21:55:47.023 +02:00 [INF] Successful login for user: 1 
